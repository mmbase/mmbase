<?xml version="1.0" encoding="UTF-8" ?>
<document>
  <properties>
    <title>install @pom.name@</title>
    <author email="mmbase@klasens.net">Nico Klasens</author>
  </properties>
  <body>
    <section>
      <subsection name="install @pom.name@ mmbase-module within web-apps">
        <p>
          There is a <a href="#Automated Bundling With Maven">fully automated</a> mechanism for bundling @pom.name@ within your
          web-apps.  Pre-requisites:
          <ol>
            <li>You use <a href="http://maven.apache.org">maven</a> to assemble your web-application.</li>
            <li>You have installed the <a href="http://mmapps.sourceforge.net/maven-mmbase-module-plugin/">maven-mmbase-module-plugin</a>.</li>
          </ol>
        </p>
        <p>
          However if you don't use maven you can install @pom.name@ manually.
          <ul>
            <li><a href="#Manual Bundling Within Web-Apps">Manual Bundling Within WebApps</a></li>
          </ul>
        </p>
      </subsection>
      <subsection name="Automated Bundling With Maven">
        <p>
          Ensure your [user_home]/build.properties contains the required maven repository.
<source><![CDATA[
maven.repo.remote=http://www.ibiblio.org/maven,@mmbasemodule.repo@
]]></source>
          Place the following dependency in your web-app's project.xml
<source><![CDATA[
  <dependency>
    <groupId>@pom.groupId@</groupId>
    <artifactId>@pom.artifactId@</artifactId>
    <version>@pom.currentVersion@</version>
    <properties>
      <war.bundle>true</war.bundle>
    </properties>
    <type>mmbase-module</type>
  </dependency>
]]></source>
          Place the following postGoal in your web-app's maven.xml
<source><![CDATA[
  <postGoal name="war:webapp">
    <attainGoal name="mmbase-module:obtain-modules"/>
  </postGoal>
]]></source>
          The next time you assemble the web-app, maven will automatically install @pom.name@
          into your web-app.  When new versions of @pom.name@ are released, all you have to 
          do is modify the version of the dependency and re-build.
        </p>
      </subsection>
      <subsection name="Manual Bundling Within Web-Apps">
        <p>
          <ul>
            <li>download the mmbase-module <a href="@mmbasemodule.repo@/@pom.groupId@/mmbase-modules/@pom.artifactId@-@pom.currentVersion@.mmbase-module">@pom.artifactId@-@pom.currentVersion@.mmbase-module</a>.</li>
            <li>This is a zip file. Unzip it into the root of your web-application.</li>
          </ul>
        </p>
      </subsection>
    </section>
  </body>
</document>
