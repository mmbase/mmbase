===================================================================
                     MMBase 1.6.0 - Release Notes
===================================================================

============
INTRODUCTION:
============

This document describes the changes that have been made in the final
release of MMBase 1.6.0, relative to the previous release of MMBase (1.5).

Bug reports should be entered at the bug reporting system for MMBase
at:

<http://www.mmbase.org/bug>


============
NEW FEATURES:
============

--------------------
General New Features:
--------------------

- Introduction of `MMBaseServlet' with specialisations like ImageServlet and
  AttachmentServlet.
  There's no need for servdb anymore. Note that ImageServlet does not accept a
  'transformation'-template like the 'servdb' servlet of previous MMBase
  versions did. This functionality can be accessed by the imagetag or the 'cache'
  function of an image node.

- Editwizards. A way to define `task oriented' editors in XML.

- Improved support for Oracle

- Added the 'storage' classes. The storage classes are a new (yet experimental)
  interface for adding database support. Supported databses are mysql and postgresql.
  The database configuration classes for tehse impleentations are relational.xml and postgresql.xml.
  These database layers automatically add indexes, and provide database support for deep buidler
  inheritance.

---------------------
MMCI New Features:
---------------------

 - Updated to MMCI 1.2.
 - NodeManagers now extends Node, and can be retrieved by number
 - cloud.hasNode() and hasRelation() methods
 - New FieldValue interface
 - Users can now create their own MMCI lists (such as NodeList)
 - better exception handling (NotFoundException and AlreadyExistsException)
 - more filters to retrieve relations or related nodes

-------------------
Taglib New Features:
-------------------

 - mm:formatter, mm:xslt : implement 'Richtext' features  (experimental)
 - mm:attachment : for obtaining download links to mmbase attachment objects
 - mm:time : for formatting mmabse time and date values
 - mm:locale : for setting country locale and language
 - mm:cloud tag: new loginpage attribute

==========================
BUG FIXES AND IMPROVEMENTS:
==========================

------------------
General Bug Fixes:
------------------
- Fixed a problem with memory allocation in the bridge, which could cause
  MMBase to claim disproportional parts of memory when using the Multilevel
  cache. (bug #4282)
- solved a possible deadlock situation regarding the use of database
  connections (bug #3974).
- Calling cloud.getList() with seachdir='source' now works. (bug #3000)
- Multilevel cacheing issues solved (bug #2971)
- When removing a builder from MMBase,referring nodes in typerel/reldef are also removed.

------------------
Security Bug Fixes:
------------------
 - Fixed a problem with checking whether relations can be added (bug #3602)
 - You can no longer delete relations you have no right to delete (bug #1932)

----------------
Taglib Bug Fixes:
----------------
[1.6.0]

-----------------
Example Bug Fixes:
-----------------
[1.6.0]


========================
Know Issues and Problems:
========================

- Orion doesn't support the final servlet api 2.3, because of this the
  jumpersFilter will not work. You will need to remove the following
  lines from <WEB-INF/web.xml>:

    <!-- Filter for jumpers -->
    <filter>
      <filter-name>Jumpers Filter</filter-name>
      <display-name>Jumpers Filter</display-name>
      <description>Filter used for jumpers</description>
      <filter-class>org.mmbase.servlet.JumpersFilter</filter-class>
    </filter>

    <filter-mapping>
      <filter-name>Jumpers Filter</filter-name>
      <url-pattern>/*</url-pattern>
    </filter-mapping>

  And replace them with:

    <servlet>
      <servlet-name>servjumpers</servlet-name>
      <display-name>servjumpers</display-name>
      <servlet-class>org.mmbase.servlet.servjumpers</servlet-class>
    </servlet>

  You also need to add:
    <servlet-filter url-pattern="/*" servlet-name="servjumpers" />

  to orion-web.xml

- MMBase doesn't compile when using J2SE 1.4, you have to change 2
  files by hand: MultiConnection.java and MultiStatement.java (both in
  the <org/mmbase/modules/database>-dir). Uncomment the methods for
  J2SE 1.4, more information is provided in the javadocs in these files.

  When using 1.4 the ant build will inform you about this.

- Length of email field inside Users and People builder isn't
  rfc-complient, but with 255 it stays beyond a limit some databases
  use before switching to a bigger string-type (eg clob).

- Html isn't html4 or xhtml valid

- Sometimes it is needed to copy xml-apis.jar to
  <$CATALINA_HOME/common/lib/> or $ORION_HOME, eg if you're doing xslt-transformation
  or if you're using the editwizards.

- Imagemagick does work with Windows 98/ME, but MMBase is not able to
  use it. You have to use Jai (Java Advanced Imaging API). You can do
  this by changing the properties in
  <mmbase-webapp/WEB-INF/config/builders/images.xml> into:

  <properties>
    <property name="ImageConvertClass">
      org.mmbase.module.builders.ConvertJAI
    </property>
    <property name="MaxConcurrentRequests">20</property>
  </properties>

  Please keep in mind that the image builder is less powerfull when
  using JAI instead of Imagemagick.

- Jumpers don't jump to /index.html by default. It gives a 404 error
  if a location can't be found, but you can changes this behaviour by
  setting a property in jumpers.xml.

- Hsqldb uses the current dir for writing the database-files. This can
  be the bin dir from where you're starting the servlet-engine. You
  can change this to a dir you want, by changing the database-property
  in jdbc.xml.

- In Resin the mmbase-taglib is not fully working, because extensive tag-instance reuse causes the
  $-variable evalution in attributes to work always. This will be fixed in 1.6.1.
  Because Resis provides its own XSL-transformation implementation, also on this area are some known
  problems.


============
Requirements:
============

MMBase needs an servlet engine which supports the servlet api 2.3 and
jsp api 1.2. Furthermore it needs a database and a jdbc-driver.

The 'bin' distro does include a hsql database and driver.


=========
Tested on:
=========

The applications listed here are known to be tested with MMBase, but
the list is probably a lot bigger :-)

-------------
Java versions
-------------
- J2SE 1.3

------------------
Servlet engines /
Applicationservers
------------------
- Tomcat 4.0.4
- Orion 1.5.2, 1.5.4
- Jetty 4.0.0
- Resin 2.1.0 (Taglib attribute problems, filed as bug in www.mmbase.org/bug)
- Tomcat 4.1.12

---------
Databases
---------
- Hsqldb 1.7.0RC2
- Mysql Ver 11.12 Distrib 3.23.32,
        Ver 11.16 Distrib 3.23.49,
        Ver 11.15 Distrib 3.23.41
  for pc-linux-gnu (i686)
- Postgresql


