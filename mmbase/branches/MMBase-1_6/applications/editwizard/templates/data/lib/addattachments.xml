<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE list PUBLIC "-//MMBase/DTD editwizard 1.0//EN" "http://www.mmbase.org/dtd/wizard-schema_1_0.dtd">
  <list role="posrel" destination="atatchments" ordertype="number" orderby="field[@name='pos']">
   <title>Related documents (ordered)</title>
		<description>These are the documents that are related, ordered by position, to this item.</description>
    <item>
      <field name="title" ftype="data"/>
			<field name="description" ftype="data"/>
    </item>
    <command name="search" nodepath="attachments" fields="title" filterrequired="true">
			<prompt>Search for attachments</prompt>
    </command>
    <command name="startwizard" inline="true" wizardname="lib/createattachment" objectnumber="new">
			 <prompt>Add a new attachment in a separate page</prompt>
	  </command>
    <action type="create">
      <relation role="posrel" destinationtype="attachments">
        <field name="pos">{sum(//relation[@role='posrel' and @lastitem='true']/field[@name='pos'])+{$pos}}</field>
      </relation>
    </action>
  </list>

