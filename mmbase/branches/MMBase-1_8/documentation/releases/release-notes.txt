===================================================================
                     MMBase 1.8.6 - Release Notes
===================================================================

============
INTRODUCTION:
============

This document describes the changes that have been made in the final
release of MMBase 1.8.6, relative to the previous release of MMBase (1.7.x).

Bug reports should be entered at the bug reporting system for MMBase
at:

<http://www.mmbase.org/jira>

1.8.6 is a bug fix release with a few minor new features.


Note: The 1.8.5 version of MMBase was the first distro of MMBase which is partly compiled with
      java 1.5. These are the following shipped applications:
      lucene, email, crontab, mmbob
      which are taken from CVS HEAD, and are no more maintained in the 1.8 branch of MMBase itself

      We don't build documentation any more, we refer to http://www.mmbase.org/mmdocs for up-to-date
      version of the documentation, or the build of HEAD for a downloadable version.


Note: Since 1.8.6 the default clustering message format is no any more compatible with mmbase 1.7
      implementations.
      If you need that, set the 'mmbase17.compatible' property on the clustering module explicetly
      back to true.


============
NEW FEATURES:
============

Since MMBase 1.8.3 we use JIRA as our bug-tracking system. See http://www.mmbase.org/jira.

--------------------
General New Features:
--------------------

[1.8.6]
    * [MMB-1478] - varStatus attribute on list-tags. Like in JSTL.
    * [MMB-1491] - MMObjectBuilder has start method, but no stop method, or shutdown method or something like that.
    * [MMB-1563] - Support for java enums.
    * [MMB-1576] - treepage, treeinclude, we also need the 'haspage' version of it.
    * [MMB-1587] - Way to get properties from cloud, nodemanager, module.
    * [MMB-1593] - Tree referrers to use tree-provider from including page.
    * [MMB-1610] - Cloning listnodescontainers.
    * [MMB-1611] - Treelist mm:tree. No way to obtain 'loop' information about the current 'branch' of nodes.
    * [MMB-1612] - PosrelCommitProcessor, FunctionValueIfEmptyCommitProcessor, FunctionValueIfEmptyGetter.
    * [MMB-1616] - To correctly determin the next pos in a list it should be known what the 'search type' is of the objects in a list.
    * [MMB-1620] - Support for multiplie fieldlist entries in builder xmls.
    * [MMB-1623] - IP address field
    * [MMB-1625] - my_editors remembers the sort direction of nodetypes on the index page
    * [MMB-1626] - You can switch the small and wide columns in my_editors
    * [MMB-1627] - A way to ignore validation constraint errors
    * [MMB-1643] - Dateparses misses 'toweek'.
    * [MMB-1648] - The way to search for nodes in EditWizards list.jsp is broadened with startnodes
    * [MMB-1655] - Class authentication items in classauthentication.xml need a 'weight' setting.
    * [MMB-1677] - Node cronentry could use their Node to make setConfiguration, setConEntry persisten. Also, 'lastrun' could be a field.
    * [MMB-1692] - compareset attribute on mm:option

    * [MMB-1577] - mm:field name="number" does not work in mm:createnode or when depending on _node  on request.
    * [MMB-1586] - Interdependencies of datatypes in jars are not resolving correctly always.
    * [MMB-1597] - Node#getRelations could be implemented smarter.
    * [MMB-1598] - Override caches.xml properties in context xml.
    * [MMB-1633] - mm:edit does not recognize mm:fields which are used in includes/tagflie.

    * [MMB-1408] - remove not used applications from applications
    * [MMB-1595] - Use replace image text when image already exists
    * [MMB-1622] - Simply ignore XML files which are not (complete) builder definition, even though they are in the builder directory.
    * [MMB-1642] - DataType#getDefaultValue does not accept parameters.
    * [MMB-1652] - Cannot start a line with *strong*.
    * [MMB-1658] - Support for nested lists in richtext/wiki syntax.
    * [MMB-1674] - @displaytype='onefield'

[1.8.5]

    * [MMB-405] - Searching in list with startnode. Cannot make new links to startnode.
    * [MMB-1450] - Missing 'gender' datatype
    * [MMB-1483] - org.mmbase.util.functions.SetFunction could be public.
    * [MMB-1447] - It would be comfortable if mm:constraint operator constants would also include the EL values like eq gt lt ge le
    * [MMB-1460] - Image-conversion should have some 'maximal image-size result' setting.
    * [MMB-1469] - mm:hasalias
    * [MMB-1470] - Since a certain browser still does not accept application/xhtml+xml it would be handy if mm:content could do the check.
    * [MMB-1477] - You cannot edit security contexts with editwizards.
    * [MMB-1482] - Needing 'Weak' EventBrokers
    * [MMB-1492] - notfound parameter for nodefunction tag
    * [MMB-1510] - mm:listfunction could have listdelimiter.
    * [MMB-1513] - A way to fill content-disposition with mm:content
    * [MMB-1516] - Ignore autodeploy applications.
    * [MMB-1517] - Flash type
    * [MMB-1523] - Properties of Transaction do not mirror the ones in the parent cloud object.
    * [MMB-1525] - PageContext to be available as a ThreadLocal
    * [MMB-1536] - Desired feature notfound="log"
    * [MMB-1502] - DataType framework needs javascript validation library.
    * [MMB-1551] - 'datadir' of storage to be configured in mmbaseroot.xml.

[1.8.4]

    * [MMB-194] - Writer-value conversion (e.g. to bridge.Node) not yet completely implemented.
    * [MMB-845] - Image upload does not show image immediately
    * [MMB-1253] - Missing a way to remove markup.
    * [MMB-1349] - A right click paste does not validate the form
    * [MMB-1369] - Override default max upload size with dtmaxsize attribute
    * [MMB-1433] - Log servlets functionality is annoying.
    * [MMB-1434] - Predicted dimension are sometimes wrong which result in a lot of spam in the log

    * [MMB-1365] - email module does not support things like smtp port and user authentication.
    * [MMB-1429] - Writer support for Set.
    * [MMB-1430] - treefile be available as a taglib function

[1.8.3]

[1.8.2]
[1.8.1]
- postgresql with views

- several small taglib improvements, like
    - an mm:mayread

    - easier to use when reusing the request (dynamic includes).  E.g. if logicaly no mm:cloud
      needed because the object has a cloud already (e.g. on reuse of a node), then it works without
      errors now.

    - jspvar on querycontainers

    - timezone on locale-tags.

    - styleClass on mm:form

    - Jsp included with mm:include or jsp:include now inherit content tag property from the including jsps.
      An included jsp can no longer override the cache settings of the including jsp.

- improved date-parsing  (also in mm:time)

- clustering implementations have been reviewed, added e.g. 'admin pages' for clustering


[1.8.0]
- Applications:
  Code in mmbase is more clearly separated in 'core' and 'applications'.

  Some code has moved to a separate application:
   - Vwms (virtual web masters) have been removed from the core and placed in a
     separate 'vwms' application.
   - SCAN is now a separate application. The application depends on the vwms
     application.

  New applications:
   - Crontab is a new application that provides scheduling.

   - Oscache-cache is a new application that implements the MMBase cache using oscache
     (shipped in distro)

   - Packaging is an application that offers an alternative for the sharing and distribution of
     'packages' of mmbase code and data.
     (stalled)

   - Richtext application provides support for kupu-editor, and we basicly have 'rich text' now,
     including inline urls, attachments, images, cross-links and 'blocks' (notes, intermezzo's)

- Security improvements:
   - Class security provides authentication wrapping based on calling class
     -> classauthentication.xml

   - It's easier to make security independent code because of new features about default authentication
     methods.

- Images improvements
   - Support for height and width (predicted before conversion, determined after conversion, and
     stored if corresponding fields are available) (This was ported to 1.7.4 too)
	 'modes' of mm:image.

   - Transformations are postponed to when actually served --> with new image-servlet it is possible to
     set up separate image server.

   - FileName of upload can be stored, and be added to the URL (/mmbase/attachments/1234/myfile.pdf)

- ResourceLoader was created, MMBase can more easily be deployed as war now. Most configuration can also
  be shipped inside jars, and be overriden. This means the most applications can principally be installed by
  placing one jar in WEB-INF/lib plus placing jsp's if any.
  --> Some resources are 'mergeable' now

- DataTypes and Field improvements.
   New datatypes 'datetime' and 'boolean'. Support for 'restrictions' on all types, default values,
   uniqueness etc. All on field level.

   DataType 'list' is not yet tested/working.

   This gave rise to complete new package org.mmbase.datatypes which is also part of 'bridge'
   because its classes are accessible through several methods in bridge.

   --> 'typehandlers' of taglib are based on datatypes now.
   --> DateParser
   --> updated builder xml format (using XSD)

- Functions. The function framework was completed. Among others you can now add functions in the
  builder xml (without the need to override the builder class).

- Events. Because of the 'cache release strategy' project, event object were created (in
  org.mmbase.core.events). Work is being done release-strategies. You can also implement different
  cache-backings --> e.g. oscache-impl of Johannes.

- Several new methods on bridge. -> see api-doc

- Tests. The junit test-cases will all succeed when we release 1.8.

- Contributions:   aselect,  mmbar,  mmbob, multilanguagegui, thememanager, lucene

- External libraries:  concurrency support (anticipating jdk 1.5)
                       we ship jstl/standard

- Support for oracle / mssql. views.

- Definition of 'bridge': The classes in mmbase-rmmci.jar.

- Clustering is pluggable: clustering application: jgroups, unicast, multicast.

- Optimization: The optimizationproject has made some progress, and quite a lot dissappeared. Most
  noticably the multitude of database layers. There's just one now.
  TODO:  Additional work remains, specifically fasing out of deprecated methods, renaming of
  classes, improvement of performance, and the simplifixation (or elimination) of JDBC module
  in favor of a stand-alone datasource implementation.

- maven build. This is not an improvement on the MMBase code itself, but an alternative
  for the current ant build system. The maven build does not yet build everything the current ant
  build does. The core and frequently-used applications are build by maven. The maven build provides
  an eady way to use MMBase artifacts in custom projects. The maven mmbase-modules plugin creates
  mmbase-module artifacts which include jars, config files, templates and examples. The plugin
  can also add these mmbase-module artifacts into a war artifact (see the example-webapp).

- Better blob-caching.
  - Support for InputStreams.

- cp1252 work arounds. (also in 1.7.x)

- Core improvements:
   - MMObjectNode can now be serialized

- query-logging: max-life-time setting.

Taglib New Features:
-------------------
- Bunch of new tags/attributes (see documentation). E.g. more complete set of has- tags
 (hasnodemanager, hasfunction etc..)

- FileItem. HttpPost useage was dropped. common fileupload's 'FileItem' can be gotten as a jspvar.

- Compatibility with EL. MMBase Taglib variables are now EL variables.
  This may give minor compatibility issues. If this gives too many issues for you, you can switch
  this behaviour off (this needs some testing still though).

- 'escapers' can be more easily added, and they can also be configured on the page (mm:escaper)
  This uses the concept of TransformerFactories and so on. A bit similar to functions.

- EditTag


Editwizard New Features:
------------------------

- Several small improvements

- The editwizard are about to receive a refactoring, which is anticipated for 1.8.1

--------------------
Obsolete Features:
--------------------
[1.8.0]
- The 'ObjectTypes' class is merged into the 'TypeDef' class. Old code
  referencing ObjectTypes should reference TypeDef instead. This includes the
  typedef.xml builder configuration file.

- The storage configuration files were originally located in the mmbase.jar.
  In 1.8, these files have been moved to the storage/database directory in the mmbase config
  directory. Files that override the storage configuration need to be moved to the new directory.

- The 'Config' module and the 'AppTool' utility have been dropped from the
  code. Both tools provided visual input regarding configuration or
  application makeup, but were considered outdated.
  References to these modules have been removed from the MMBase admin pages.

- Old database layers have been dropped.

- 1.8 assumes that relation builders are extended from insrel (using the extends attribute in the builder tag).
  Code may behave erratically if your relation builder xmls are not configured to use inheritence.
  See upgrade.txt on how to adapt your configuration.

------------------
Bug Fixes:
------------------


[1.8.6]

* [MMB-94] - Attachment builder: MagicFile troubles.
    * [MMB-195] - Multilevel cache is implemented in the bridge.
    * [MMB-1294] - Maintainer of the Resources application has partially been changed
    * [MMB-1343] - Cannot sort in other direction
    * [MMB-1355] - prompt_file_upload not used. Default prompt talks about images.
    * [MMB-1359] - integer fields representing boolean values cannot be gracefully updated to boolean datatyped field.
    * [MMB-1367] - Memory leak in QueryResultCache
    * [MMB-1397] - Name of generic authentication parameters (name/password) sometimes remain empty.
    * [MMB-1401] - Serialization can corrupt MMBase database
    * [MMB-1407] - <mm:cloud logon="xxxx" pwd="yyyy" jspvar="myCloud"> pops up a login-window.
    * [MMB-1437] - broken images in 'finalist' look example
    * [MMB-1481] - scan is horribly broken.
    * [MMB-1505] - keyword "case" in mysql should be replace when query database.
    * [MMB-1546] - If you don't cancel transaction, then commit on next node does not work.
    * [MMB-1552] - MMBase parses my custom datatypes.xml twice, resulting in double execution of commit() or proces() functions.
    * [MMB-1553] - Message too long errors in the log.
    * [MMB-1562] - HtmlBase in Scan application does use incorrect Jumper class
    * [MMB-1564] - Datatype javascript not supporting 'session name' property of mm:cloud.
    * [MMB-1566] - Cannot add multiple startnodes by alias with dots.
    * [MMB-1568] - linkfinder a bit broken.
    * [MMB-1572] - If using node field from node which was from transaction which was just committed, an exception occurs.
    * [MMB-1574] - Writing application does not work if application xml not a file.
    * [MMB-1578] - mm:function does not use implicit node if that is from an including page.
    * [MMB-1579] - mm:tree does not use implicit node if that is from an including page.
    * [MMB-1588] - Cannot override state and readonly attributes of fields.
    * [MMB-1590] - Builders with too long descriptions won't deploy in some databases.
    * [MMB-1591] - NPE from BasicReleaseStrategy
    * [MMB-1594] - Data loaded by included lists (add list item) are not saved when changed
    * [MMB-1596] - mm:include notfound="skip" not working in tomcat 6.0.16
    * [MMB-1599] - if 'some page' in <mm:url page="<some page>" contains allready parameters with &, then those &'s are not escaped, even if escapeamps="true"
    * [MMB-1600] - <mm:url page="http://..." absolute="true" /> does not work as expected.
    * [MMB-1602] - org.mmbase.util.GenericationResponseWrapper#getHttpServletResponse not unwrapping properly.
    * [MMB-1607] - Implicit setValue in mm:form does not use the right processor.
    * [MMB-1608] - XML fields not quite working correctly in mm:form.
    * [MMB-1609] - mm:listrelationsconstainer id="" not working.
    * [MMB-1619] - xinclude to be enabled during parsing of mmbase configuration files.
    * [MMB-1624] - notfound attribute on mm:treeinclude not property working.
    * [MMB-1628] - Even if using Node#getInputStream the complete blob is readed into memory first.
    * [MMB-1629] - Dove is missing method to check and commit changed relations
    * [MMB-1634] - keys, values, in dropdowns of field-info not correctly escaped.
    * [MMB-1635] - MMservers creates a new record when searchquery fails
    * [MMB-1640] - taglib/test/cloud.jsp failing.
    * [MMB-1646] - weekdays datatype does not consider locale specific 'first day of week'.
    * [MMB-1647] - Sometimes a day with -1 was generated when day was not a dropdown but input box
    * [MMB-1651] - MMBase taglib memory leak
    * [MMB-1654] - If list is first thing in section, it ends up in the header.
    * [MMB-1666] - If you use cache-framework before servlet context is initialized, you may end up with the incorrect resource being used.
    * [MMB-1667] - ConcurrentModificationException for certain Cache Implemetnations.
    * [MMB-1669] -  ConcurrentModificationException from org.mmbase.security.implementation.cloudcontext.builders.Users.nodeChanged(Users.java:563)
    * [MMB-1670] - ConcurrentModificationException from  at org.mmbase.core.event.NodeEventHelper.createNodeEventInstance(NodeEventHelper.java:55)
    * [MMB-1671] - Something wrong with BasicTransaction.
    * [MMB-1673] - DateFormat for rfc822 is in 24 hour range
    * [MMB-1675] - No daymark created on the day that mmbase was started.
    * [MMB-1678] - Animated gifs are corrupted easily when scaled with ImageMagick
    * [MMB-1679] - CronEntry not started excactly at minutes.
    * [MMB-1681] - listprovider attributes (add, delete, retain,comparator) missing on mm:listrelations
    * [MMB-1684] - ConcurrentModificationException from TypeRel
    * [MMB-1689] - Some setters missing on mm:listfunction
    * [MMB-1691] - Possiblity to disable some modules using their properties.



[1.8.5]
    * [MMB-535] - basic bridge implementation: cannot delete node if lacking write rights
    * [MMB-1254] - Searchbox of editwizard's list always talks about 'Title contains'.
    * [MMB-1270] - Date-editing does not make less significant fields 0.
    * [MMB-1296] - Password gets reset when you edit a user in the security editors
    * [MMB-1307] - If field is virtual, e.g. because not present in database, it is still added to searchqueries.
    * [MMB-1357] - Loginmethod is not passed arround
    * [MMB-1404] - TreeList can give IndexOutOfBoundException
    * [MMB-1435] - MS-SQL does not work
    * [MMB-1436] - <minLength value="0" does not quite work as one would think (e.g. in mm:fieldinfo).
    * [MMB-1439] - ${_} in body of mm:import does not work properly
    * [MMB-1441] - fmt-locale is unset by mm:content, mm:locale, if they don't set locale themselves (no language attribute)
    * [MMB-1442] - mm:import from request in an mm:context messes up that request attribute itself.
    * [MMB-1443] - mm:createnode mm:createrelation don't show body if buffering disabled.
    * [MMB-1444] - LocalizedEntryListFactory does not decently degrade locales.
    * [MMB-1449] - treeinclude, treefile don't work in a war.
    * [MMB-1453] - EL does not work nice if Nodes are written e.g. to request.
    * [MMB-1457] - If handle field of icache is 'not null', image-conversion does not work.
    * [MMB-1459] - Image-converion 'per url' does not work very well any more.
    * [MMB-1461] - CharsetRemover filter does not work any more.
    * [MMB-1467] - sorters must be grouped in xml, otherwise dont' work as expected.
    * [MMB-1471] - deleting of node 'with relations' goes wrong, if the relations themselves have relations.
    * [MMB-1472] - Dove, check for 'editable' fields it too simple. Cannot edit virtual/system fields now.
    * [MMB-1479] - check field existance not used for getInputStreamValue, getSize.
    * [MMB-1480] - getSize seems not to work on multilevel nodes.
    * [MMB-1484] - SpaceReducer (the 'escaper' reducespace) produces newline.
    * [MMB-1496] - BasicSqlHandler a bit too stupid when it comes to datetime fields.
    * [MMB-1497] - javascript escapers should also escape newlines.
    * [MMB-1499] - Tag with explicit escape-value, changes escaping of current _-variable.
    * [MMB-1500] - Client specifc rendering and caching. Need to use 'Vary' header.
    * [MMB-1506] - ConcurrentModificationException from TemplateCaches
    * [MMB-1508] - Informix sql layer. It is doubtfull that adding {+ORDERED} to queries is a definite good idea.
    * [MMB-1509] - node attribute missing on mm:relatednodescontainer
    * [MMB-1515] - mm:node element="bla" notfound="skip" is broken.
    * [MMB-1518] - Question marks in filename may lead to non-working image-urls
    * [MMB-1520] - Deadlock if obtaining cloud in init of module.
    * [MMB-1524] - Problems with serialization of Transaction objects.
    * [MMB-1527] - Datatypes: Cannot specify param values containing only of white-space.
    * [MMB-1528] - null-values are not processed through the 'getprocessor.
    * [MMB-1531] - BasicQuery.toSql returns generic sql and not the real generated sql
    * [MMB-1532] - java.rmi.server.hostname is not set when RMIRegistryServer is used
    * [MMB-1534] - Context 'import' is not easy to convert to 'default'
    * [MMB-1535] - oscache-cache depends on oscache version 2.4 but 2.2 was still mentioned in build.properties
    * [MMB-1537] - Informix: Calling scrubConnection resets lock-mode.
    * [MMB-1538] - mm:fieldinfo type="guivalue" does not honor 'urlconvert' parameter if presenting an image.
    * [MMB-1541] - Daymarkers: getDayCountAge() always returns 0
    * [MMB-1544] - dtminlength=0 makes the field required.
    * [MMB-1547] - field ftype="startwizard" throws exception when when the node is no yet saved
    * [MMB-1548] - Unable to create nodes which typedefs owner is admin
    * [MMB-1549] - Cannot set node from transaction in session, and get it out again.
    * [MMB-1555] - binary fields with unspecified maxLength don't deploy on mysql.

[1.8.4]

    * [MMB-235] - mm:url referids. Question-marks/amperstands in values should be escaped.
    * [MMB-675] - In contradiction to prompts and titles, optionlists can not be multilangual.
    * [MMB-703] - xsl transformation for objectypes processing dies quietly
    * [MMB-859] - Cursor appears in lowest HtmlArea instead of first input
    * [MMB-872] - Scroll-position still not saved well.
    * [MMB-944] - ImageMagick crashes or just seizes to convert
    * [MMB-965] - [email] pushing towards the use of context and datasource when using smtp
    * [MMB-1002] - Editwizard inserts additional carriage returns in textarea when saving
    * [MMB-1023] - Present no longer default for datetime fields.
    * [MMB-1032] - Can get NPE from mm:cloud if name unset and session.
    * [MMB-1220] - Can not search on INTEGER field with guitype string
    * [MMB-1305] - datepicker: if wizard is scrolled, datepicker appear on very odd places.
    * [MMB-1317] - Editwizards don't  seem to understand 'null' values.
    * [MMB-1319] - tiny_mce doesn't validate when required
    * [MMB-1335] - inline anonymous datatype declaration in builder files does not work
    * [MMB-1347] - mm:countrelations role=""
    * [MMB-1348] - MMbase taglib 2 completely hangs tomcat 5.5.9
    * [MMB-1352] - mm:hasfield has no 'nodemanager' attribute.
    * [MMB-1353] - Convertor that converts BLOB's to disk fails horribly
    * [MMB-1356] - In transaction you can create a node, even if you have no rights.
    * [MMB-1362] - _name, _type, _size variables are not any more produced for binary uploads.
    * [MMB-1366] - CachePolicy does not work when used on NodeManager.getList()
    * [MMB-1370] - default constructor of QueryREsultCache now call MMBase.getMMBase. Goes wrong if MMObjectNode is serialized as part of UserContext.
    * [MMB-1371] - mm:node element="" tries the empty node.
    * [MMB-1376] - mm:createalias does not work directly in mm:createnode.
    * [MMB-1380] - functionsets: default values for primitive parameter types (at least int's) will never be read from xml, they are overriden by default first
    * [MMB-1381] - s( ..<) and s(..>) features are not working when using JAI.
    * [MMB-1383] - defaulttype attribute is required in taglib/content.xml but it shouldn't be.
    * [MMB-1384] - function tag does not work well with EL
    * [MMB-1385] - Fullback and import requires loads of memory to import binaries
    * [MMB-1387] - the functionset_1_0.dtd does not allow the attribute 'required' on element 'param', but functionset.java does.
    * [MMB-1392] - crontab: equals of cronentry n ot complete, cannot change only configuration.
    * [MMB-1398] - Filled filename field is browser/os  dependent.
    * [MMB-1403] - Specifying empty database in mmbaseroot.xml, supposes a database with empty name.
    * [MMB-1417] - Chained Commitor Processor doesn't work
    * [MMB-1419] - ThreadPools are not shut down on shutdown of MMBAse
    * [MMB-1420] - date-picker javascript errors in tinymce
    * [MMB-1421] - dtminlength/binary field validation inconsistent
    * [MMB-1425] - No 'inverse' attribute on mm:escaper
    * [MMB-1427] - Function Set XML's are not very forgiving with e.g. return types.
    * [MMB-1428] - <mm:cloud method="pagelogon" .. > goes wrong with <mm:createnode> when within <mm:node> tag
    * [MMB-1431] - postfix prefix elements (of field), don't support xml:lang
    * [MMB-1432] - Wizards fail to pickup i18n directories in referrer and templates directory

[1.8.3]
MMB-1331  	 mm:treefile cannot be used as a writer.
MMB-1345 	MMServers only considers 'machinename', not host, if host overriden with -Dmmbaseroot.host, that has no effect on the default machinename
MMB-1346 	BasicCloudContext.getCloud can report that cloud 'mmbase' does not exist.
MMB-1344 	ImageMagick and text, it is broken again. Now because it produces @<temporary file that was used>

MMB-943 	It is suspected that some tag instances holds a bit more references than needed.
MMB-1338 	tomcat 5.5.20, and tagfiles. If tag used in mmbase list tag, in the tag mmbase variables are not compatible with EL any more.
MMB-1333 	'NoAuthentication' not working properly.
MMB-1332 	<datatypes entry in builder xml gives NPE
MMB-1328 	<mm:time time="now" may give an error if getId of time-zone is e.g. GMT+1
MMB-1327 	Insrel dir field not backward compatible (needs to be system)
MMB-1326 	Default description of a field is fieldname
MMB-1325 	Datetime not properly initialized by editwizards
MMB-1324 	Node functions do not autocast parameters
MMB-1322 	<mm:cloud rank="anonymous", still need to logon.
MMB-1321 	Serilization of Config prevents init of static code
MMB-1320 	Legacy enumerations are automatically required
MMB-1318 	datatype 'field' not recognized in wizards
MMB-1308 	Searchlist relation rights checks did not work with inheritance
[1.8.2]

-- More memory-conversation in taglib, memory could remain in cached tag if exception occured.

[1.8.1]

These are the closed bugs in mmbase.org/bug.
#6844  Database Layer        Postgresql case insensitive order by on distinct query fails
#6840  Core                  Can occur duplicate number fields in query.
#6838  Core                  NodeEvents are sent twice (or even more often).
#6837  Misc                  WatchedReloadableModule broken.
#6833  Core                  Enumeration guitype does not work
#6827  Performance           Postgresql ONLY keyword optimization does not use directionality
#6826  Database Layer        getAllowedRelations() in TypeRel does not return all relations
#6823  Core                  If gui value of node is based on gui of 'first' field, and that field is enumeration, that the gui is the key, not the value.
#6822  Taglibs               id attribute missing on some query containers.
#6821  Taglibs               _node stack not correctly peeked after body of a nodeprovider tag.
#6819  Taglibs               mm:url combination of referid and absolute attribute simply ignores 'absolute' attribute.
#6818  Core                  Missing: 2006-05-18 13:55:43,890 ERROR org.mmbase.cache.ConstraintsMatchingStrategy findMatcherForConstraint.261 - Could not match constraint of type BasicFieldValueInConstraint
#6817  Applications          Media editor compilation error
#6816  Taglibs               mm:relatednodes does not work if no mm:cloud.
#6814  Taglibs               referids attribute on m:functioncontainer, documented, valid, but not implemented.
#6813  Utils                 QueryReader does not support 'startnodes' (though it is mentioned in the XSD). Lucene contrib suffers.
#6812  Security              'cloud' security does not work.
#6393  Applications          XMLimporter imports to context TRaticUser

More:
-- Important memory-conservation changes were done, mainly in taglib.
-- Several bugs in ReleaseStrategy were fixed, and preformance was improved
-- Clustering implementations have been reviewed, which solved several bugs.

[1.8.0]
many

---------------------------------------------------------
Known API incompatibilities of bridge, between 1.7 and 1.8.
---------------------------------------------------------
Of course we try to mimimize this, but sometimes it happens...

- org.mmbase.bridge.Cloud#getUser().getRank() does not return a String any more, but an actual Rank
  object --> cloud.getUser().getRank().equals(Rank.ANONYMOUS.toString()); still compiles but doesn't work any
  more!!
  So, grep your code for that. And see that the change is, though incompatible, a real
  improvement... Quickest fixes are to change getUser().getRank() by getUser().getRank().toString(),
  or remove the 'toString()' on the compared Rank-constant.


- Node#setValue("owner", ..) does no longer throw an exception.

- Empty fields of a node in a Transaction behave excactly like empty fields of a node which is not in
  a Transaction. In previous versions there could be a difference, more specificly with 'not null'
  fields (which for example could still be null in a node which is only commited in the transaction,
  and not yet to the database).

- Processors have been moved to org.mmbase.datatypes.processors (from
  org.mmbase.bridge.util.fields).
  If you used those in 1.7, then you need to recompile, and reconfigure in datatypes.xml.


- Implement 'node' functions on bridge, not core. This ensure awareness, and that functions can be
  called through MMCI. It seems a bit odd to use node interfaces in an otherwise core context, but
  functions are exposed through the bridge, and exposing core object to the outside is even odder.


- MMBase.getConnection was dropped. This can be replaced by:
  import javax.sql.*;
  import org.mmbase.storage.implementation.database.Attributes;
  DataSource dataSource = (DataSource) mmbase.getStorageManagerFactory().getAttribute(Attributes.DATA_SOURCE);
     return dataSource.getConnection();
 }


-  The getChildElement methods on DocumentReaders (like XMLBasicReader) don't return Enumerations
   any more but Iterators

-  MMBase.mmobjs has been made private.

========================
Know Issues and Problems:
========================


- If your app-server supports JSP2.0 (e.g. tomcat5 with a 'new'
  web.xml or resin 3), then the new EL (Expression Language) syntax
  collides with the Expression language of mmbase taglib.

  MMBase Taglib JSP's using the ${} syntax might continue to work, provided it follows EL syntax.
  Some of the more complex expressions may not work - specifically those where multiple contaxt variables
  are used in one expression.
  If expressions fail to work udner EL, either replace ${...} expressions with the alternate (non EL)
  syntax: $[...], or add <%@page isELIgnored="true" %> to the page to turn off EL.

- Orion version < 2.x doesn't support the final servlet api 2.3,
  because of this the jumpersFilter will not work. You will need to
  remove the following lines from <WEB-INF/web.xml>:

    <!-- Filter for jumpers -->
    <filter>
      <filter-name>Jumpers Filter</filter-name>
      <display-name>Jumpers Filter</display-name>
      <description>Filter used for jumpers</description>
      <filter-class>org.mmbase.servlet.JumpersFilter</filter-class>
    </filter>

    <filter-mapping>
      <filter-name>Jumpers Filter</filter-name>
      <url-pattern>/*</url-pattern>
    </filter-mapping>

  And replace them with:

    <servlet>
      <servlet-name>servjumpers</servlet-name>
      <display-name>servjumpers</display-name>
      <servlet-class>org.mmbase.servlet.servjumpers</servlet-class>
    </servlet>

    <servlet-filter url-pattern="/*" servlet-name="servjumpers" />

  (I'm not sure where the last line has to be: web.xml or orion-web.xml).


- Length of email field inside Users and People builder isn't
  rfc-compliant, but with 255 it stays beyond a limit some databases
  use before switching to a bigger string-type (eg clob).

- Not all HTML is html4 or xhtml valid

- Sometimes it is needed to copy xml-apis.jar to
  <$CATALINA_HOME/common/lib/> or $ORION_HOME, eg if you're doing
  xslt-transformation or if you're using the editwizards.

- Imagemagick does work with Windows 98/ME, but MMBase is not able to
  use it. You have to use Jai (Java Advanced Imaging API). You can do
  this by changing the properties in

   <mmbase-webapp>/WEB-INF/config/builders/applications/images.xml (after installation of 'Resource')
   or
   <mmbase-webapp>/WEB-INF/config/applications/Resources/builders/images.xml (before installation of 'Resource')

   into:

  <properties>
    <property name="ImageConvertClass">
      org.mmbase.module.builders.ConvertJAI
    </property>
    <property name="MaxConcurrentRequests">20</property>
  </properties>

  Please keep in mind that the image builder is less powerful when
  using JAI instead of Imagemagick.

- Jumpers jump to /index.html by default, which can e.g. shield the
  image servlet (if 'dotlessly' mapped). Remove the setting from
  jumpers.xml if you prefer nice 404's (this is like this on default)

- Hsqldb uses the current dir for writing the database-files. This can
  be the bin dir from where you're starting the servlet-engine. You
  can change this to a dir you want, by changing the database-property
  in jdbc.xml (perhaps using $DATADIR)

- Resin provides its own XSL-transformation implementation, on this
  area are some known problems.

- Resin cannot swallow some of the larger jsp/taglib pages.


============
Requirements:
============

MMBase needs an servlet engine which supports the servlet api 2.3 and
jsp api 1.2. Furthermore it needs a database and a jdbc-driver.

The 'bin' distro does include a hsqldb database and driver.


