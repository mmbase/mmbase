<html
    xmlns:jsp="http://java.sun.com/JSP/Page"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:mm="http://www.mmbase.org/mmbase-taglib-2.0"
    xml:lang="en"
    lang="en">
  <jsp:output doctype-root-element="html"
              doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN"
              doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"/>
  <jsp:directive.page import="org.mmbase.datatypes.*,java.util.*" />
  <jsp:text>&lt;!-- $Id: index.jspx,v 1.2 2006-04-29 18:47:25 michiel Exp $ --&gt;</jsp:text>
  <mm:content type="text/html" expires="0" jspvar="locale">
    <head>
      <title>MMBase DataType validation</title>
      <mm:link page="/mmbase/style/css/mmbase.css">
        <link rel="stylesheet"    href="${_}"     type="text/css" />
      </mm:link>
      <mm:link page="/mmbase/style/images/favicon.ico">
        <link rel="icon"          href="${_}" type="image/x-icon" />
        <link rel="shortcut icon" href="${_}" type="image/x-icon" />
      </mm:link>
    </head>

    <body >
      <mm:url id="ok" write="false" page="/mmbase/style/images/ok.png" />
      <mm:url id="next" write="false" page="/mmbase/style/images/next.png" />
      <mm:url id="back" write="false" page="/mmbase/style/images/back.png" />
      <h1>MMBase DataTypes</h1>
      <p>
        DataTypes can be defined globally, and also per builder xml. See the builder documentation
        on how to do that.
      </p>
      <table>
        <tr>
          <th>Global datatypes</th>
          <td>
            <mm:link page="global.jspx">            
              <a href="${_}" class="navigate">
                <img alt="global datatype" src="${next}" />
              </a>
            </mm:link>
          </td>
        </tr>
        <mm:cloud>
          <mm:import externid="nodemanager">object</mm:import>
          <mm:import externid="field">otype</mm:import>
          
          <tr>
            <th>
              Datatype of Field
              <form method="post" action=".">
                <select name="field" onchange="document.getElementById('fielddatatype').href='field.jspx?field=' + this.value + '&amp;amp;nodemanager=${nodemanager}';">
                  <mm:fieldlist type="all" jspvar="fieldvar" nodetype="$nodemanager">
                    <c:choose>
                      <c:when test="${field eq fieldvar.name}">
                        <option value="${fieldvar.name}" selected="selected">${fieldvar.name}</option>
                      </c:when>
                      <c:otherwise>
                        <option value="${fieldvar.name}">${fieldvar.name}</option>
                      </c:otherwise>
                    </c:choose>
                  </mm:fieldlist>
                </select>
                of nodemanager
                <select name="nodemanager" onchange="this.form.submit();">
                <mm:listnodes type="typedef" comparator="NATURAL">
                  <mm:hasnodemanager name="${_node.name}">
                    <c:choose>
                      <c:when test="${nodemanager eq _node.name}">
                        <option value="${_node.name}" selected="selected"><mm:nodeinfo type="gui" /></option>
                      </c:when>
                      <c:otherwise>
                        <option value="${_node.name}" ><mm:nodeinfo type="gui" /></option>
                      </c:otherwise>
                    </c:choose>
                  </mm:hasnodemanager>
                </mm:listnodes>
              </select>
              </form>
            </th>
            <td>
              <mm:link page="field.jspx" referids="nodemanager,field">            
                <a id="fielddatatype" href="${_}" class="navigate">
                  <img alt="global datatype" src="${next}" />
                </a>
              </mm:link>
            </td>
          </tr>
        </mm:cloud>        
      </table>
      <div class="link">
        <mm:link page="..">
          <a href="${_}" class="navigate">
            <img alt="back" src="${back}" />
          </a>
        </mm:link>
      </div>
    </body>
  </mm:content>
</html>

