<?xml version="1.0"?>
<!DOCTYPE wizard-schema PUBLIC "-//MMBase/DTD editwizard 1.0//EN" "http://www.mmbase.org/dtd/wizard-schema_1_0.dtd">
<wizard-schema id="pop">
   <title>Persoonlijke opleidingsplan editor</title>
   <action type="create">
      <object type="pop">
      </object>
   </action>
   <action type="delete">
      <prompt>Weet u zeker dat u deze POP wilt verwijderen ?</prompt>
      <description>Klik hier om deze POP te verwijderen.</description>
   </action>
   <action type="load">
      <field name="name"/>
      <relation destination="people" role="related"/>
      <relation destination="profiles" role="related"/>
      <relation destination="competencies" role="needcomp"/>
      <relation destination="competencies" role="developcomp"/>
   </action>
   <lists>
   </lists>
   <steps>
      <step form-schema="edit_pop"/>
   </steps>

<form-schema id="edit_pop">
   <field name="name" dtminlength="0" dtmaxlength="255">
   <prompt>name</prompt></field>

   <list role="related" destination="people" minoccurs="0" maxoccurs="1">
      <title>Bijbehorend Persoon</title>
      <item>
         <field name="firstname" ftype="data"/>
         <field ftype="startwizard" wizardname="people" />
      </item>
      <command name="search" nodepath="people" fields="firstname,lastname" age="-1" orderby="number" directions="down">
        <search-filter>
            <name>Achternaam bevat</name>
            <search-fields>lastname</search-fields>
        </search-filter>
        <search-filter>
            <name>Voornaam bevat</name>
            <search-fields>firstname</search-fields>
        </search-filter>
      </command>
      <command name="startwizard" inline="true" wizardname="people" objectnumber="new">
         <prompt>Nieuw</prompt>
      </command>
      <action type="create">
         <relation destinationtype="people" role="related">
         </relation>
      </action>
   </list>

   <list role="related" destination="profiles" minoccurs="0" maxoccurs="*">
      <title>Gewenste profielen</title>
      <item>
         <field name="name" ftype="data"/>
         <field ftype="startwizard" wizardname="profiles" />
      </item>
      <command name="search" nodepath="profiles" fields="name" age="-1" orderby="number" directions="down">
         <search-filter>
            <name>Naam bevat</name>
            <search-fields>name</search-fields>
         </search-filter>
      </command>
      <command name="startwizard" inline="true" wizardname="profiles" objectnumber="new">
         <prompt>Nieuw</prompt>
      </command>
      <action type="create">
         <relation destinationtype="profiles" role="related">
         </relation>
      </action>
   </list>
   <list extends="list/popneedcompetencies.xml"/>
   <list extends="list/popdevelopcompetencies.xml"/>
</form-schema>
</wizard-schema>
