<?xml version="1.0" encoding="UTF-8"?>
<builder
    xmlns="http://www.mmbase.org/xmlns/builder"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.mmbase.org/xmlns/builder
                        http://www.mmbase.org/xmlns/builder.xsd"
    name="datatypes" maintainer="mmbase.org" version="0" extends="object">
  <names>
    <singular xml:lang="en">datatypes</singular>
    <plural xml:lang="en">datatypes</plural>
  </names>

  <descriptions>
    <description xml:lang="nl">Builder voor het testen van de bridge classes, met allerlei types velden</description>
    <description xml:lang="en">Builder to test the bridge classes, with a lot of different typed fields </description>
  </descriptions>

  <fieldlist>
    <field>
      <db>
        <name>string</name>
        <type size="255" state="persistent">STRING</type>
      </db>
    </field>
    <field>
      <datatype base="field" xmlns="http://www.mmbase.org/xmlns/datatypes" />
      <db>
        <name>field</name>
        <type size="255" state="persistent">STRING</type>
      </db>
    </field>
    <field>
      <datatype base="eline" xmlns="http://www.mmbase.org/xmlns/datatypes" />
      <db>
        <name>line</name>
        <type size="255" state="persistent">STRING</type>
      </db>
    </field>
    <field>
      <datatype  base="dutch-zipcode" xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="1234 AA" />
      </datatype>
      <db>
        <name>zipcode</name>
        <type size="255" state="persistent">STRING</type>
      </db>
    </field>
    <field>
      <descriptions>
        <description>Example of String pattern.</description>
      </descriptions>
      <datatype xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="a" />
        <pattern value="(?i)[ab]{1,5}" />
      </datatype>
      <db>
        <name>pattern</name>
        <type size="255" notnull="false" state="persistent">STRING</type>
      </db>
    </field>
    <field>
      <descriptions>
        <description>Example of String range</description>
      </descriptions>
      <datatype xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="b" />
        <minInclusive value="a" />
        <maxInclusive value="zzzzz" />
      </datatype>
      <db>
        <name>stringrange</name>
        <type key="false" notnull="false" size="255" state="persistent">STRING</type>
      </db>
    </field>
    <field>
      <descriptions>
        <description>Example of String length</description>
      </descriptions>
      <datatype xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="aaa" />
        <minLength value="1" />
        <maxLength value="10" />
      </datatype>
      <db>
        <name>stringlength</name>
        <type key="false" notnull="false" size="255" state="persistent">STRING</type>
      </db>
    </field>

    <field>
      <descriptions>
        <description>Example of String enumeration</description>
      </descriptions>
      <datatype base="iso639" xmlns="http://www.mmbase.org/xmlns/datatypes" />
      <db>
        <name>languages</name>
        <type  size="2" state="persistent">STRING</type>
      </db>
    </field>

    <field>
      <db>
        <name>integer</name>
        <type  state="persistent">INTEGER</type>
      </db>
    </field>
    <field>
      <datatype xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="6" />
        <minInclusive value="1" />
        <maxExclusive value="10" />
      </datatype>
      <db>
        <name>range</name>
        <type  state="persistent">INTEGER</type>
      </db>
    </field>
    <field>
      <datatype xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="6" />
        <enumeration>
          <entry value="2" />
          <entry value="4" />
          <entry value="6" />
          <entry value="8" />
        </enumeration>
      </datatype>
      <db>
        <name>enumeration</name>
        <type  state="persistent">INTEGER</type>
      </db>
    </field>
    <field>
      <datatype xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="6" />        
        <enumeration enforce="onchange">
          <entry value="2" xml:lang="en" display="two" />
          <entry value="2" xml:lang="nl" display="twee" />
          <entry value="8" xml:lang="nl" display="acht" />
          <entry value="4" />
          <entry value="6" xml:lang="eo" display="ses" />
          <entry value="8" xml:lang="eo" display="ok" />
          <entry value="8" xml:lang="en" display="eight" />
        </enumeration>
      </datatype>
      <db>
        <name>localized_weak_enumeration</name>
        <type  state="persistent">INTEGER</type>
      </db>
    </field>
    <field>
      <datatype xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="6" />
        <enumeration enforce="never">          
          <entry value="2" />
          <entry value="4" />
          <entry value="6" />
          <entry value="8" />
        </enumeration>
      </datatype>
      <db>
        <name>weakest_enumeration</name>
        <type  state="persistent">INTEGER</type>
      </db>
    </field>

    <field>
      <datatype base="ordinals" xmlns="http://www.mmbase.org/xmlns/datatypes">
        <minInclusive value="2" />
        <maxExclusive value="10" />
      </datatype>
      <db>
        <name>restricted_ordinals</name>
        <type  state="persistent">INTEGER</type>
      </db>
    </field>

    <field>
      <datatype xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="ERROR" />
        <enumeration >
          <entry basename="org.mmbase.datatypes.resources.states"
                 javaconstants="org.mmbase.module.builders.MMServers" 
                 />
        </enumeration>
      </datatype>
      <db>
        <name>mmbase_state_enumeration</name>
        <type  state="persistent">INTEGER</type>
      </db>
    </field>


    <field>
      <datatype xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="ERROR" />
        <enumeration >
          <entry basename="org.mmbase.datatypes.resources.states"
                 javaconstants="org.mmbase.module.builders.MMServers" 
                 />
        </enumeration>
      </datatype>
      <db>
        <name>mmbase_state_enumeration</name>
        <type  state="persistent">INTEGER</type>
      </db>
    </field>


    <field>
      <db>
        <name>float</name>
        <type  state="persistent">FLOAT</type>
      </db>
    </field>

    <field>
      <db>
        <name>datetime</name>
        <type  state="persistent">DATETIME</type>
      </db>
    </field>
    
    <field>
      <datatype xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="2005-10-05" />
        <minInclusive value="2005-01-01" />
        <maxExclusive value="2050-01-01" />
      </datatype>
      <db>
        <name>period</name>
        <type  state="persistent">DATETIME</type>
      </db>
    </field>
    
    <field>
      <datatype xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="now" />
        <minExclusive value="today - 3 day"    enforce="oncreate"/>
        <maxInclusive value="today + 100 year" enforce="onchange"/>
      </datatype>
      <db>
        <name>dynamic_period</name>
        <type  state="persistent">DATETIME</type>
      </db>
    </field>
    
    <field>
      <datatype base="weeknumbers" xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="now" />
        <minExclusive value="today - 3 day"    enforce="oncreate" />
        <maxInclusive value="today + 100 year" enforce="onchange" />
      </datatype>
      <db>
        <name>weeknumbers</name>
        <type  state="persistent">DATETIME</type>
      </db>
    </field>
    
    <field>
      <datatype xmlns="http://www.mmbase.org/xmlns/datatypes">
        <minLength value="3" />
        <maxLength value="10000" />
      </datatype>
      <db>
        <name>handle</name>
        <type  size="100000"   state="persistent">BINARY</type>
      </db>
    </field>
    
    <field>
      <datatype base="checksum" xmlns="http://www.mmbase.org/xmlns/datatypes" />
      <db>
        <name>checksum</name>
        <type state="system" size="255" unique="true">STRING</type>
      </db>
    </field>
    
    <field>
      <db>
        <name>boolean</name>
        <type state="persistent">BOOLEAN</type>
      </db>
    </field>
    
    <field>
      <db>
        <name>node</name>
        <type state="persistent">NODE</type>
      </db>
    </field>
    <field>
      <datatype base="typedef" xmlns="http://www.mmbase.org/xmlns/datatypes" />
      <db>
        <name>typedef</name>
        <type state="persistent">NODE</type>
      </db>
    </field>
    
    <field>
      <datatype base="yesno" xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="true" />
      </datatype>
      <db>
        <name>yesno</name>
        <type state="persistent" >BOOLEAN</type>
      </db>
    </field>
    
    <field>
      <datatype base="boolean" xmlns="http://www.mmbase.org/xmlns/datatypes" />
      <db>
        <name>integer_boolean</name>
        <type state="persistent"  >INTEGER</type>
      </db>
    </field>
    <field>
      <datatype base="boolean" xmlns="http://www.mmbase.org/xmlns/datatypes" />
      <db>
        <name>string_boolean</name>
        <type state="persistent" size="255" >STRING</type>
      </db>
    </field>
    <field>
      <datatype base="line" xmlns="http://www.mmbase.org/xmlns/datatypes" />
      <db>
        <name>boolean_string</name>
        <type state="persistent"  >BOOLEAN</type>
      </db>
    </field>
    <field>
      <datatype base="line" xmlns="http://www.mmbase.org/xmlns/datatypes" />
      <db>
        <name>integer_string</name>
        <type state="persistent" >INTEGER</type>
      </db>
    </field>
    <field>
      <datatype  xmlns="http://www.mmbase.org/xmlns/datatypes">
        <enumeration>
          <query type="typedef" xmlns="http://www.mmbase.org/xmlns/searchquery">
          </query>
        </enumeration>
      </datatype>
      <db>
        <name>typedef</name>
        <type state="persistent">NODE</type>
      </db>
    </field>
    <field>
      <datatype  xmlns="http://www.mmbase.org/xmlns/datatypes">
        <enumeration>
          <query type="typedef" xmlns="http://www.mmbase.org/xmlns/searchquery">
            <constraint field="number" operator="less"  value="10" />
          </query>
        </enumeration>
      </datatype>
      <db>
        <name>small_typedef</name>
        <type state="persistent">NODE</type>
      </db>
    </field>

    <field>
      <datatype  xmlns="http://www.mmbase.org/xmlns/datatypes">
        <setprocessor>
          <class name="org.mmbase.datatypes.processors.LastModifiedProcessorFactory">
            <param name="field">relevant_lastmodified</param>
          </class>
        </setprocessor>
      </datatype>
      <db>
        <name>relevant_string</name>
        <type state="persistent" size="255">STRING</type>
      </db>
    </field>
    <field>
      <db>
        <name>relevant_lastmodified</name>
        <type state="system">DATETIME</type>
      </db>
    </field>
    <field>
      <db>
        <name>xml</name>
        <type state="persistent" size="64000">XML</type>
      </db>
    </field>
  </fieldlist>

  <functionlist>
    <!-- provide a function for the nodes by pattern -->
    <function name="test" key="[{NODE.number}]"> <!-- key of pattern function provider is interpreted as a pattern -->
      <class>org.mmbase.util.functions.PatternNodeFunctionProvider</class>
    </function>
    <!-- provide  functions by bean -->    
    <function key="integerFunction" name="aaa"><!-- key of bean function is interpreted as a method name-->
      <class>org.mmbase.util.functions.ExampleBean</class>
    </function>
    <function key="stringFunction" name="bbb">
      <class>org.mmbase.util.functions.ExampleBean</class>
    </function>
    <!-- this one needs a node argument, and therefore is certainly a node-function -->
    <function name="successor"> <!-- no key given, default to name of function -->
      <class>org.mmbase.util.functions.ExampleBean</class>
    </function>
    <function name="mapFunction">
      <class>org.mmbase.util.functions.ExampleBean</class>
    </function>
    <function name="nodeFunction1">
      <class>org.mmbase.util.functions.ExampleBean</class>
    </function>
    <function name="nodeFunction2">
      <class>org.mmbase.util.functions.ExampleBean</class>
    </function>
    <function name="nodeListFunction">
      <class>org.mmbase.util.functions.ExampleBean</class>
    </function>
    <function name="nodeListFunction1">
      <class>org.mmbase.util.functions.ExampleBean</class>
    </function>
  </functionlist>

</builder>
