<?xml version="1.0" encoding="utf-8"?>
<!-- 
/*
 * Copyright 2001-2004 The Apache Software Foundation.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *      http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
 -->

<document>
  <properties>
    <title>Multiproject Dependency Convergence Report</title>
    <author email="michal.maczka@dimatics.com">Michal Maczka</author>
  </properties>  
 <body> 
  <section name="Multiproject Dependency Convergence Report">        
    <p>Legend:
       <table>
         <tr>
           <td><img src="images/icon_success_sml.gif"/></td>
           <td>All projects share one version of the dependency.</td>
         </tr>
         <tr>
           <td><img src="images/icon_error_sml.gif"/></td>
           <td>At least one project has a differing version of the dependency.</td>
         </tr>
       </table>
     </p>
     <p>
        <table>
         <tr>
             <th>Number of sub-projects:</th>
             <td>${harmonizer.NumberOfProjects}</td>
          </tr>
          <tr>
             <th>Number of dependencies (NOD):</th>
             <td>${harmonizer.NumberOfDependencies}</td>
          </tr>
          <tr>
             <th>Number of artifacts (NOA):</th>
             <td>${harmonizer.NumberOfArtifacts}</td>
          </tr>          
          <tr>
             <th>Convergence (NOD/NOA):</th>
             <td><b>${harmonizer.Convergence}</b></td>
          </tr>        
        </table>  
     </p>
     <p>
        Dependencies used in sub-projects:
        #foreach ($dep in $harmonizer.Dependencies)
          <subsection name="${dep.Id}">
           <table>
              <tr>
               #if( $dep.Clean )
               <td><img src="images/icon_success_sml.gif"/></td>
               #else 
                <td><img src="images/icon_error_sml.gif"/></td>
               #end
             <td>
               <table>
                 #foreach ($version in $dep.Versions) 
                  <tr>
                    <td width="20%">${version}</td>
                    <td>
                         <ol>
                         #foreach ($project in $dep.getProjects(${version}))  
                           #if ( $project.Url )
                              <li><a href="${project.Url}">${project.Id}</a></li>
                            #else
                               <li>${project.Id}</li>
                            #end  
                         #end
                        </ol>                        
                    </td>
                   </tr> 
                 #end  
             </table>
            </td> 
            </tr>
            </table>
          </subsection>
        #end
      </p>
    </section>
 </body>
</document>
