<?xml version="1.0"?>
<!DOCTYPE wizard-schema PUBLIC "-//MMBase/DTD editwizard 1.0//EN" "http://www.mmbase.org/dtd/wizard-schema_1_0.dtd">
<wizard-schema id="empty">
  <title>Metavocabulary Editor</title>

  <action type="create">
    <object type="metavocabulary"></object>
  </action>
    
  <action type="load">
       <relation destination="metavocabulary" role="posrel" />
       <relation destination="metadefinition" role="constraints" />
       <relation destination="metavocabulary" role="constraints" />
       <relation destination="synonym" role="related" />

  </action>


  <action type="delete" />
    
  <lists>
      <optionlist name="opts">
           <option id="1">Mandatory</option>
	   <option id="2">Limited</option>
	   <option id="3">Forbidden</option>
      </optionlist>
  </lists>
  <steps>
    <step form-schema="step1" />
  </steps>

  <form-schema id="step1">
    <title>Metavocabulary invoeren</title>

   
    <field name="value" dtminlength="1">
      <prompt>Metavocabulary waarde  </prompt>
    </field>


  <list destination="metavocabulary" role="posrel" minoccurs="0" maxoccurs="*">
      <title>Bijbehorende Metavocabulary</title>
      <item> 
        <field name="value" ftype="data" dtminlength="1" >
          <prompt>Metavocabulary waarde    </prompt>
        </field>
        <field fdatapath="field[@name='pos']" ftype="line" dttype="int" 
               dtmin="1" dtmax="3" dtmaxlength="1" dtminlength="1" />
        <field ftype="startwizard" wizardname="config/metavocabulary/metavocabularydefinition" />
      </item> 

     <action type="add">
       <relation destinationtype="metavocabulary" role="posrel">
         <object type="metavocabulary"></object>
       </relation>
     </action>

     <action type="load">
      <relation destinationtype="metavocabulary" role="posrel"/>
     </action>

    <command name="startwizard" inline="true" wizardname="config/metavocabulary/metavocabularydefinition" 
                                               objectnumber="new" />

    <command name="search" nodepath="metavocabulary" fields="value" age="-1" orderby="number" 
                              directions="down"  >
      <prompt>Zoeken naar metavocabulary </prompt>
        <search-filter>
            <name>Waarde bevat</name>
            <search-fields>value</search-fields>
        </search-filter>
    </command>



  </list>

  <list destination="metadefinition" role="constraints" minoccurs="0" maxoccurs="*">
      <title>Beperking voor metadefinitie</title>
      <item> 
        <field name="name" ftype="data" dtminlength="1" >
          <prompt>Metadefinition waarde    </prompt>
        </field>

	<field fdatapath="field[@name='type']" ftype="enum" >
            <prompt>Constraint type</prompt>
            <optionlist select="opts" />
        </field>

 
        <field fdatapath="field[@name='minvalues']" ftype="line" 
               dttype="int" dtmin="1" dtmaxlength="4" dtminlength="1" />
        <field fdatapath="field[@name='maxvalues']" ftype="line" 
               dttype="int" dtmin="1" dtmaxlength="4" dtminlength="1" />

        <field ftype="startwizard" wizardname="config/metadefinition/metadefinition" />

      </item> 

     <action type="add">
       <relation destinationtype="metadefinition" role="constraints">
         <object type="metadefinition"></object>
       </relation>
    

     </action>

     <action type="load">
        <relation destinationtype="metadefinition" role="constraints"/>
     </action>

   
    <command name="search" nodepath="metadefinition" fields="name" age="-1" orderby="number" 
                              directions="down"  >
      <prompt>Zoeken naar metadefinition </prompt>
        <search-filter>
            <name>Waarde naam</name>
            <search-fields>name</search-fields>
        </search-filter>
    </command>

  </list>
  <list destination="synonym" role="related" extends="config/synonym/synonym-list.xml" />


  </form-schema>
</wizard-schema>
