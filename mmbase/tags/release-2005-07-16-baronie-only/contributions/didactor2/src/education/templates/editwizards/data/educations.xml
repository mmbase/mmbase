<?xml version="1.0"?>
<!DOCTYPE wizard-schema PUBLIC "-//MMBase/DTD editwizard 1.0//EN" "http://www.mmbase.org/dtd/wizard-schema_1_0.dtd">
<wizard-schema id="empty">
    <title>Opleiding Editor</title>

    <action type="create">
        <object type="educations">
            <field name="showtitle">1</field>
        </object>
    </action>

    <action type="load">
        <relation destination="providers" role="related" />
        <relation destination="classes" role="related" />
        <relation destination="news" role="related" />
        <relation destination="learnblocks" role="posrel" />
        <relation destination="urlcategories" role="related" />
        <relation destination="people" role="rolerel">
          <object type="people">
            <relation destination="roles" role="related">
              <object type="roles"/>
            </relation>
          </object>
        </relation>
        <relation destination="paragraphs" role="posrel">
           <object>
              <relation destination="attachments" role="posrel" />
              <relation destination="images" role="pos2rel" />
              <relation destination="urls" role="posrel" />
           </object>
        </relation>
        <relation destination="people" role="classrel"/>
        <relation destination="images" role="sizerel" />
        <relation destination="audiotapes" role="posrel" />
        <relation destination="videotapes" role="posrel" />
        <relation destination="attachments" role="posrel" />
        <relation destination="urls" role="posrel" />
    </action>

    <action type="delete" />

    <lists>
       <optionlist include="option_lists/layout.xml" />
       <optionlist include="option_lists/imagelayout.xml" />
       <optionlist include="option_lists/images_position.xml" />
       <optionlist include="option_lists/boolean.xml" />
    </lists>

    <steps>
        <step form-schema="step1" />
        <step form-schema="step2" />
        <step form-schema="step3" />
    </steps>

    <form-schema id="step1">
        <title>Opleiding invoeren</title>
        <field name="name" dtminlength="1">
            <prompt>Opleiding naam</prompt>
        </field>
      <field name="showtitle" ftype="enum">
         <prompt xml:lang="nl">Titel laten zien</prompt>
         <prompt xml:lang="en">Show title</prompt>
         <optionlist select="boolean" />
      </field>
 


        <field name="intro" ftype="html" dtminlength="0">
            <prompt>Tekst</prompt>
        </field>

        <field name="layout" ftype="enum">
            <prompt>Layout</prompt>
            <optionlist select="layout" />
        </field>
         <field name="imagelayout" ftype="enum">
            <prompt>Layout afbeeldingen</prompt>
            <optionlist select="imagelayout" />
        </field>

        <list role="sizerel" extends="list/sizedimages.xml" />
 
        <list role="posrel" extends="list/attachments-posrel.xml" />
        <list role="posrel" extends="list/audiotapes-posrel.xml" />
        <list role="posrel" extends="list/videotapes-posrel.xml" />

        <list destination="urls" role="posrel" extends="list/urls-posrel.xml" />
 
        <list destination="providers" role="related" extends="list/providers.xml" />
        <list destination="news" extends="list/news.xml" />
        <list destination="learnblocks" role="posrel" extends="list/learnblocks.xml" />
        <list destination="classes" role="related" extends="list/classes.xml" />
        <list destination="people" role="rolerel" extends="list/people-education.xml" />
        <list destination="urlcategories" role="related" extends="list/urlcategories.xml" />


        <list destination="people" role="classrel" minoccurs="0" maxoccurs="*">
            <title>Bijbehorende Personen</title>
            <item>
                <field name="firstname" ftype="data">
                    <prompt>Voornaam</prompt>
                </field>
                <field fdatapath="object/field[@name='lastname']" ftype="data"><!--name="lastname" ftype="data">-->
                    <prompt>Achternaam</prompt>
                </field>
                <field wizardname="people" ftype="startwizard" />
            </item>

            <action type="create">
                <relation destinationtype="people" role="classrel">
                </relation>
            </action>

            <action type="add">
                <relation destinationtype="peope" role="classrel">
                    <object type="people">
                    </object>
                </relation>
            </action>

            <action type="load">
            </action>

            <command name="startwizard" inline="true" wizardname="people" objectnumber="new" />

            <command name="search" nodepath="people" fields="firstname,lastname" age="-1" orderby="number" directions="down" >
                <prompt>Zoeken naar studenten</prompt>
                <search-filter>
                    <name>Achternaam bevat</name>
                    <search-fields>lastname</search-fields>
                </search-filter>
                <search-filter>
                    <name>Voornaam bevat</name>
                    <search-fields>firstname</search-fields>
                </search-filter>
                <search-filter>
                    <name>Account bevat</name>
                    <search-fields>account</search-fields>
                </search-filter>
            </command>
        </list>


    </form-schema>

    <form-schema id="step2">
        <title>Alineas invoeren</title>
        <field name="name" ftype="data"/>
        <field name="showtitle" ftype="enum">
           <prompt xml:lang="nl">Titel laten zien</prompt>
           <prompt xml:lang="en">Show title</prompt>
           <optionlist select="boolean" />
        </field>
        <list extends="paragraphs/add_paragraphs_posrel.xml"/>
    </form-schema>

    <form-schema id="step3">
        <title>Competenties invoeren</title>
        <field name="name" ftype="data"/>
        <list extends="list/needcompetencies.xml"/>
        <list extends="list/developcompetencies.xml"/>
    </form-schema>


</wizard-schema>
