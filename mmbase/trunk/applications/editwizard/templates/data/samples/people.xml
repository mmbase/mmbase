<?xml version="1.0"?>
<wizard-schema id="empty">
	<title>Enter Wizard Title Here</title>
	<action type="load">
		<relation destination="news" role="related" >
			<relation destination="images" role="related" />
		</relation>
	</action>
	
	<action type="create">
		<object type="people">
			<field name="firstname" ftype="string">John</field>
			<field name="lastname" ftype="string">Doe</field>
		</object>
	</action>
	
	<form-schema id="step1">
		<title>test</title>
		<field name="firstname" ftype="html" xdttype="html">
			<prompt>First name</prompt>
		</field>
		<field name="lastname" ftype="html" xdttype="html">
			<prompt>Last name</prompt>
		</field>
		
		<list role="related" destination="news" minoccurs="0" maxoccurs="*">
			<command name="search" nodepath="news" fields="title" age="-1"  >
				<prompt>Search for article</prompt>
				<search-filter>
					<name>title contains</name>
					<search-fields>title</search-fields>
				</search-filter>
			</command>
			<title>Article</title>

			<item>
				<field name="title" ftype="data">
					<prompt>Article:</prompt>
				</field>
				<list role="related" destination="images">
					<title>imagelist</title>
					<command name="search" nodepath="images" fields="name" age="-1"  >
						<prompt>Search</prompt>
						<search-filter>
							<name>name</name>
							<search-fields>name</search-fields>
						</search-filter>
					</command>
					<item>
						<field fdatapath=".//object[@type='images']" ftype="image">
							<prompt>Image</prompt>
						</field>
					</item>
					<action type="create">
						<relation destinationtype="images" role="related">
						</relation>
					</action>
				</list>
			</item>
			
			<action type="create">
				<relation role="related" destinationtype="news">
				</relation>
				<action type="set">
					<field fdatapath="../field[@name='title']">{relation/object/@number}</field>
				</action>
			</action>
		</list>
		
	</form-schema>
</wizard-schema>
