<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE storage PUBLIC "-//MMBase//DTD storage config 1.0//EN" "http://www.mmbase.org/dtd/storage_1_0.dtd" >
<storage>
  <storagemanagerfactory classname="org.mmbase.storage.implementation.database.DatabaseStorageManagerFactory" version="0.1" />
  <storagemanager classname="org.mmbase.storage.implementation.database.ViewDatabaseStorageManager" version="0.1" />
  <searchqueryhandler classname="org.mmbase.storage.search.implementation.database.BasicSqlHandler" />

  <attributes>
    <!-- No file path, then use webdir -->
    <attribute name="database-binary-file-path" ></attribute>

    <!-- Oracle is a hell when is comes to blobs, so store as file instead of in the database-->
    <option name="database-stores-binary-as-file" />

    <scheme name="create-table-scheme">CREATE TABLE {1} ({2} {3} {5})</scheme>
    <scheme name="create-object-table-scheme">CREATE TABLE {1} ({2} {3} {5})</scheme>
    <scheme name="create-foreign-key-scheme">CONSTRAINT {1}_{2}_foreign FOREIGN KEY ({2}) REFERENCES {3} ({4})</scheme>

    <scheme name="create-sequence-scheme" />
    <scheme name="init-sequence-scheme" >CREATE SEQUENCE {0}_autoincrement INCREMENT {3} START {2}</scheme>
    <scheme name="update-sequence-scheme" />
    <scheme name="read-sequence-scheme">SELECT NEXTVAL (''{0}_autoincrement'')</scheme>

    <scheme name="create-index-scheme">CREATE INDEX {3} ON {1} ({2})</scheme>
    <scheme name="delete-index-scheme">DROP INDEX {3}</scheme>

    <scheme name="create-view-scheme">CREATE OR REPLACE VIEW {1} ({3}) AS SELECT {4} FROM {2}, {6} WHERE {2}.{5} = {6}.{5}</scheme>
  </attributes>

  <!-- Oracle type mappings -->
  <type-mappings>
    <type-mapping name="FLOAT" type="REAL" />
    <type-mapping name="DOUBLE" type="DOUBLE PRECISION" />
    <type-mapping name="LONG" type="BIGINT" />
    <type-mapping name="INTEGER" type="INTEGER" />
    <type-mapping name="NODE" type="INTEGER" />
    <type-mapping name="STRING" type="TEXT" />
    <type-mapping name="XML" type="TEXT" />
    <type-mapping name="DATETIME" type="TIMESTAMP" />
    <type-mapping name="BOOLEAN" type="BOOLEAN" />
    <type-mapping name="LIST[FLOAT]"   type="FLOAT[]" />
    <type-mapping name="LIST[DOUBLE]"  type="DOUBLE PRECISION[]" />
    <type-mapping name="LIST[LONG]"    type="BIGINT[]" />
    <type-mapping name="LIST[INTEGER]" type="INTEGER[]" />
    <type-mapping name="LIST[NODE]"    type="INTEGER[]" />
    <type-mapping name="LIST[STRING]"  type="TEXT[]" />
    <type-mapping name="LIST[XML]"     type="TEXT[]" />
    <type-mapping name="LIST[DATETIME]"  type="TIMESTAMP[]" />
    <type-mapping name="LIST[BOOLEAN]"   type="BOOLEAN[]" />
  </type-mappings>

  <!-- Oracle disallowed fields are retrieved from the database -->
  <disallowed-fields />

</storage>
