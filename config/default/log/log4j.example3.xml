<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "http://web.omroep.nl/mmbase/logging/log4j.dtd" [
         <!ENTITY logger   "org.mmbase.util.logging.log4j.Log4jImpl" >
         <!ENTITY priority  "org.mmbase.util.logging.log4j.Log4jPriority" >
         <!ENTITY logdir   "/tmp/" >
]>

<!-- 
   Example with an extra log file for only the warnings and worse. 
-->


<log4j:configuration>
<!-- appenders -->
  
  <appender name="logfile" class="org.apache.log4j.FileAppender" >
    <param name="File"   value="&logdir;mmbase.log" />
    <param name="Append" value="true" />
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d %-7p %c{4} %M.%L %x - %m%n" />
      <!-- very slow! Don't use for production!! -->
    </layout>
  </appender>
  
  <appender name="errorfile" class="org.apache.log4j.FileAppender" >
    <param name="File"   value="&logdir;mmerror.log" />
    <param name="Append" value="true" />
    <param name="Threshold" value="WARN"/>
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d %-5p %c{4} %M.%L %x - %m%n" />
      <!-- very slow! Don't use for production!! -->
    </layout>
  </appender>

  <!-- The 'page debug' loggings are simply logged to the normal
       logfile, but with a slightly different format -->
  <appender name="pagedebug" class="org.apache.log4j.FileAppender" >
    <param name="File"   value="&logdir;mmbase.log" />
    <param name="Append" value="true" />
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d{ISO8601} PAGE    %c{4} - %m%n" />
    </layout>
  </appender>
  
  <!-- categories -->

  <category name="MMBASE-PAGE" class ="&logger;" additivity="false" >
    <priority class="&priority;" value ="service" />
    <appender-ref ref="pagedebug" />
  </category>
  
  <root>
    <priority class="&priority;" value ="debug" />
    <appender-ref ref="logfile" />
    <appender-ref ref="errorfile" />
  </root>
  
</log4j:configuration>
