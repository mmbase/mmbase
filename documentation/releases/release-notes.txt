===================================================================
                     MMBase 1.9.6 - Release Notes
===================================================================

============
INTRODUCTION:
============

This document describes the changes that have been made since the
release of MMBase 1.9.5. Bug reports should be entered at the bug reporting system for MMBase
at:

<http://www.mmbase.org/bug>


Release notes generated by JIRA for MMBase 1.9.6:
http://www.mmbase.org/jira/secure/ReleaseNote.jspa?projectId=10000&styleName=Html&version=10231

Release notes of previous versions can be found in Jira, below are those copied for 1.9.6.


Release Notes - MMBase - Version 1.9.6
--------------------------------------

** Bug
    * [MMB-78] - Import fails if NODE cannot be NULL
    * [MMB-1115] - startnodes does not accept aliass with dots in name.
    * [MMB-1751] - Explicit index on unique field results error in hsql.
    * [MMB-1785] - Error: Operation 'change context' on 752 (default) was NOT permitted to foo
    * [MMB-1925] - mailedtime field is not set when sending mail
    * [MMB-1991] - Reuse of datatypes of fields of other builders does not work quite yet if the database is new.
    * [MMB-1992] - user0 in username field while creating new
    * [MMB-1993] - guivalue of WeekDataType
    * [MMB-1994] - getChildContexts of ResourceLoader on servlet resource not always working properly
    * [MMB-1995] - commandserver. If you give a lot of request at the same time, it may dead-lock.
    * [MMB-1997] - Searching with special characters does't work properly
    * [MMB-1998] - Default for database's 'NOT NULL' should be false for Node fields that are in an application import.
    * [MMB-2000] - Chained transformers don't end cleanly if an exception occurs in one of its links.
    * [MMB-2007] - ImageMagickImageInformer leaves temporary files
    * [MMB-2008] - Memory leak in a few mm:function tags.
    * [MMB-2013] - Cannot use custom ranks in actions of component XML's.
    * [MMB-2017] - User serialization does'nt work properly
    * [MMB-2021] - Max-key-length property not honored for composite indexes
    * [MMB-2022] - Meta files are sometimes created incorrectly
    * [MMB-2025] - Error checking unuploaded file before uploading
    * [MMB-2027] - Property local in from field is default 'true', should be 'false' in my opinion
    * [MMB-2028] - When creating mediasources sometimes multiple mediafragments get created
    * [MMB-2031] - Property 'allowencodedpassword' does not work when builder is overriden
    * [MMB-2032] - Using <mm:fieldinfo type="searchinput" /> on reldef, typerel and objecttype may result in field not found
    * [MMB-2033] - getLocale() in LanguageDataType returns often Cloud Locale and not preferred one of user



** Improvement
    * [MMB-1980] - Make filenames ASCII in BinaryFile#getFileName()
    * [MMB-1996] - Function to change url field without upload or transcoding 
    * [MMB-2001] - If using ViewDatabaseStorageManager the fields should be checked too.
    * [MMB-2002] - A way to influence the order in witch EventListeners are notified.
    * [MMB-2003] - Sometimes the verification of the columns in mysql does not work. In MySQL.
    * [MMB-2005] - Imagemagick also supports things like xc:blue, which you can enter in template= now.
    * [MMB-2006] - mm:validation
    * [MMB-2009] - An event to be sent after the applications are autodeployed.
    * [MMB-2011] - Making it possible to use S&R to fill node fields via generic editors.
    * [MMB-2014] - Some improvements on mm:timer
    * [MMB-2015] - EventListener to clear os-caches for richtext.
    * [MMB-2016] - Performance improvement of mm:treeinclude tags.
    * [MMB-2018] - If x:parse is called before editwizards, then the editwizards don't work.
    * [MMB-2020] - Cookiepath attribute. mm:write cookie=.. cookiepath=..
    * [MMB-2024] - Add the machinename to the default oscache.path.
    * [MMB-2029] - Daymarker filter in list works different from bridge Queries

** New Feature
    * [MMB-1822] - Node#setNodeManager(NodeManager).
    * [MMB-1999] - Javascript and CSS compressors.
    * [MMB-2004] - Thumbnail generations
    * [MMB-2010] - Workflow implementation for Cloud Context Security




---------------------------------------------------------
Known API incompatibilities of bridge, between 1.8 to 1.9.
---------------------------------------------------------

- Bridge. A RelationList is no NodeList any more (though a Relation is still a Node).

- Taglib. <mm:url generates object of type org.mmbase.bridge.jsp.taglib.pageflow.Url (rather then
  String).

- org.mmbase.storage.search.implementation.*. StringBuilders are used in API.

- org.mmbase.util was cleaned up a bit.
  e.g.
  org.mmbase.util.xml.ApplicationReader ->   org.mmbase.util.xml.applicationdata.ApplicationReader
  and similar changes


========================
Known Issues and Problems:
========================

- Imagemagick does work with Windows 98/ME, but MMBase is not able to
  use it. You have to use Jai (Java Advanced Imaging API). You can do
  this by changing the properties in

   <mmbase-webapp>/WEB-INF/config/builders/applications/images.xml (after installation of 'Resource')
   or
   <mmbase-webapp>/WEB-INF/config/applications/Resources/builders/images.xml (before installation of 'Resource')

   into:

  <properties>
    <property name="ImageConvertClass">
      org.mmbase.module.builders.ConvertJAI
    </property>
    <property name="MaxConcurrentRequests">20</property>
  </properties>

  Please keep in mind that the image builder is less powerful when
  using JAI instead of Imagemagick.

- Jumpers jump to /index.html by default, which can e.g. shield the
  image servlet (if 'dotlessly' mapped). Remove the setting from
  jumpers.xml if you prefer nice 404's (this is like this on default)

- Resin provides its own XSL-transformation implementation, on this
  area are some known problems.

- Resin cannot swallow some of the larger jsp/taglib pages.


============
Requirements:
============

MMBase versions need the following implementation versions of the servlet specification
(http://java.sun.com/products/servlet/) and Java. The shipped templates need implementations of the jsp specification
(http://java.sun.com/products/jsp/) and JSTL (http://java.sun.com/products/jsp/jstl/).

A complete J2EE implementation is not necessary.

Tomcat is an example servlet/jsp implementation, which many people use.


MMBase   Java   Servlet   JSP     JSTL   Tomcat  Orion
-----------------------------------------------------
1.8      1.4     2.3      1.2     1.1     4      2
1.9      5       2.4      2.0     1.1     5
2.0?     6       2.5      2.1     1.2     6


Furthermore MMBase needs a database and a jdbc-driver, or alternatively, a datasource resource
provided by the container.

The 'example webapp' includes an hsqldb database configuration and driver.


=========
Tested on:
=========

The applications listed here are known to be tested with MMBase, but
the list is probably a lot bigger :-)

See also /version?server

-------------
Java versions
-------------

- J2SE 1.5

-------------
Java compilers
-------------

- Sun's javac 1.5

  When altering line 115 in org.mmbase.cache.CacheManager from
    Cache cache = getCache(cacheName);
  to
    Cache<?,?> cache = getCache(cacheName);
  the compiler will run into a bug in Sun's javac regarding the casting of
  generic types. See: http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4916620

------------------
Servlet engines /
Application servers
------------------

These are the applications servers on which MMBase was tested.

- Tomcat 5.5.17, 5.5.20, 6.0
- ..

---------
Databases
---------

- Mysql
- Hsqldb 1.8.0 (shipped with distro)
- Postgresql
- PostgreSQL 8.1.3



