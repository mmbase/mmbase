<?xml version="1.0"?>
<project name="Lucene" default="package" basedir=".">
  <property name="project.name"    value="lucene" />
  <property name="project.package" value="org/mmbase/module/lucene" />
  <property name="project.jars.dir" location="../.." />
  <property name="project.jars.includes" value="contributions/lucene/build/*.jar,applications/crontab/build/mmbase-crontab.jar" />

  <import file="../../applications/buildbase-include.xml" />

  <property name="lucene.extrajars.loc"    value="http://www.mmbase.org/download/jars/lucene2-extrajars.tgz" />
  <property name="lucene.extrajars"            value="${project.jar.dir}" />
  <property name="lucene.extrajars.dest"       value="${download.dir}/lucene2-extrajars.tgz" />
  <property name="lucene.extrajars.expanded"   value="${lucene.extrajars}/lucene-core-2.0.0.jar" />

  <target name="crontab">
    <echo message="${applications.dir}/crontab" />
    <ant dir="${applications.dir}/crontab" inheritAll="false" />
  </target>


  <target name="extrajars" >
    <echo message="extra jars" />
    <antcall target="downloadgz">
      <param name="sourcefile"   value="${lucene.extrajars.loc}"/>
      <param name="destfile"     value="${lucene.extrajars.dest}"/>
      <param name="destdir"      value="${lucene.extrajars}"/>
      <param name="expand.dir"   value="${lucene.extrajars}"/>
      <param name="expandedfile" value="${lucene.extrajars.expanded}"/>
    </antcall>
  </target>

  <target name="jar" depends="extrajars,crontab,buildbase.jar" />

  <!-- target can be dropped ... -->
  <target name="clean" depends="buildbase.clean">
    <delete>
      <fileset dir=".">
        <include name="extrajars/**" />
      </fileset>
    </delete>
  </target>

</project>
