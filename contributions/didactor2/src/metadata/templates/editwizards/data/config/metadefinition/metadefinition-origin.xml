<?xml version="1.0"?>
<!DOCTYPE wizard-schema PUBLIC "-//MMBase/DTD editwizard 1.0//EN" "http://www.mmbase.org/dtd/wizard-schema_1_0.dtd">
<wizard-schema id="empty">
  <title>Metadefinition Editor</title>

  <action type="create">
    <object type="metadefinition">
      <relation destination="{$origin}" role="posrel" createdir="source" />
    </object>
  </action>

  <action type="load">
    <field name="name"/>
    <field name="type"/>
    <field name="required"/>
    <field name="minvalues"/>
    <field name="maxvalues"/>
    <field name="handler"/>
    <field name="description"/>
    <relation destinationtype="metastandard" role="constraints" />
    <relation destinationtype="synonym" role="related" />
    <relation destinationtype="metavocabulary" role="related" />
    <relation destinationtype="metavocabulary" role="constraints" />
  </action>

  <action type="delete" />

  <lists>
    <optionlist include="config/option_list/constraint_type.xml" />
    <optionlist include="config/option_list/metadatatypes.xml" />
    <optionlist include="config/option_list/boolean.xml" />
    <optionlist include="config/option_list/metahandlers_type.xml" />
  </lists>

  <steps>
    <step form-schema="step1" />
  </steps>

  <form-schema id="step1">
    <title>Metadefinition invoeren</title>

    <field name="name" dtminlength="1">
      <prompt>Metadata naam</prompt>
    </field>

    <field name="description" dtminlength="0" dttype="text">
      <prompt>Metadata omschrijving</prompt>
    </field>

    <field name="type" ftype="enum">
      <prompt>Type</prompt>
      <optionlist select="metadatatypes" />
    </field>

    <field name="required" ftype="enum">
       <prompt>Verplicht</prompt>
       <optionlist select="boolean" />
    </field>

    <field name="minvalues" ftype="int" dtrequired="false">
      <prompt>Minimaal aantal waarden</prompt>
    </field>

    <field name="maxvalues" ftype="int" dtrequired="false">
      <prompt>Maximaal aantal waarden</prompt>
    </field>

    <field name="handler" ftype="enum">
      <prompt xml:lang="nl">Classname van een handler om metadata uit te lezen</prompt>
      <prompt xml:lang="en">Classname for meta autofiller</prompt>
      <optionlist select="metahandlers_type" />
    </field>

    <!-- has to be only visible if type=3, but that's not possible atm -->
    <list destination="metavocabulary" role="related"       extends="config/metavocabulary/metavocabulary-list.xml" />
    <list destination="metavocabulary" role="constraints"   extends="config/metavocabulary/metavocabulary-constraint-list.xml"/>
    <list destination="metastandard"   role="constraints"   extends="config/metastandard/metastandard-constraint-list.xml"/>
    <list destination="synonym"        role="related"       extends="config/synonym/synonym-list.xml" />

    </form-schema>
</wizard-schema>
