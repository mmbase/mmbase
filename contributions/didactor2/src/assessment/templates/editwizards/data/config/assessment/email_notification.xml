<?xml version="1.0"?>
<!DOCTYPE wizard-schema PUBLIC "-//MMBase/DTD editwizard 1.0//EN" "http://www.mmbase.org/dtd/wizard-schema_1_0.dtd">
<wizard-schema id="email_notification">
   <title xml:lang="en">Notification Edit</title>
   <title xml:lang="nl">Notificatie Edit</title>
   <title xml:lang="fr">L'avis editent</title>

   <action type="create">
      <object type="email_notifications">
         <field name="trigger_type">-2</field>
      </object>
   </action>


   <action type="load">
      <field name="subject" />
      <field name="body" />
      <field name="trigger_type" />
      <field name="senddate" />
      <field name="trigger_setting1" />

      <relation destination="classes" role="related" />
      <relation destination="people" role="related" />
   </action>


   <lists>
      <optionlist name="listTriggerType">
         <!-- yes should be on top, because it is the default -->
         <option id="0">
            <prompt xml:lang="en">Date</prompt>
            <prompt xml:lang="nl">Datum</prompt>
            <prompt xml:lang="fr">Date</prompt>
         </option>

         <option id="1">
            <prompt xml:lang="en">Number of inactive weeks</prompt>
            <prompt xml:lang="nl">Aantal inactieve weken</prompt>
            <prompt xml:lang="fr">Nombre de semaines inactives</prompt>
         </option>

         <option id="-1">
            <prompt xml:lang="en">Already sent</prompt>
            <prompt xml:lang="nl">Reeds verzonden</prompt>
            <prompt xml:lang="fr">Deja envoye</prompt>
         </option>

         <option id="-2">
            <prompt xml:lang="en">Disabled</prompt>
            <prompt xml:lang="nl">Gehandicapten</prompt>
            <prompt xml:lang="fr">Handicape</prompt>
         </option>
      </optionlist>


      <optionlist name="trigger_setting1">
         <!-- yes should be on top, because it is the default -->
         <option id="1">
            <prompt>1</prompt>
         </option>
         <option id="2">
            <prompt>2</prompt>
         </option>
         <option id="3">
            <prompt>3</prompt>
         </option>
         <option id="4">
            <prompt>4</prompt>
         </option>
         <option id="5">
            <prompt>5</prompt>
         </option>
         <option id="6">
            <prompt>6</prompt>
         </option>
         <option id="7">
            <prompt>7</prompt>
         </option>
         <option id="8">
            <prompt>8</prompt>
         </option>
         <option id="9">
            <prompt>9</prompt>
         </option>
         <option id="10">
            <prompt>10</prompt>
         </option>
      </optionlist>

   </lists>


   <steps>
      <step form-schema="edit_email_notification"/>
   </steps>

<form-schema id="edit_email_notification">
   <field name="subject" dtminlength="1">
      <prompt xml:lang="en">subject</prompt>
      <prompt xml:lang="nl">onderwerp</prompt>
      <prompt xml:lang="fr">sujet</prompt>
   </field>

   <list destination="classes" extends="config/class/classes-related.xml" />
   <list destination="people" extends="config/people/people-related.xml" />


   <field name="body" ftype="text">
      <prompt xml:lang="en">body</prompt>
      <prompt xml:lang="nl">lichaam</prompt>
      <prompt xml:lang="fr">corps</prompt>
   </field>


   <field name="trigger_type" ftype="enum">
      <prompt xml:lang="en">Trigger type</prompt>
      <prompt xml:lang="nl">Het type van trekker</prompt>
      <prompt xml:lang="fr">Type de declenchement</prompt>

      <optionlist select="listTriggerType" />
   </field>


   <field name="senddate" ftype="date">
      <prompt xml:lang="en">Send Date</prompt>
      <prompt xml:lang="nl">Verzend Datum</prompt>
      <prompt xml:lang="fr">Envoyez la date</prompt>
   </field>

   <field name="trigger_setting1" ftype="enum">
      <prompt xml:lang="en">Weeks after last closed lesson</prompt>
      <prompt xml:lang="nl">Weken na laatste gesloten les</prompt>
      <prompt xml:lang="fr">Semaines apres derniere lecon fermee</prompt>

      <optionlist select="trigger_setting1" />
   </field>


</form-schema>

</wizard-schema>
