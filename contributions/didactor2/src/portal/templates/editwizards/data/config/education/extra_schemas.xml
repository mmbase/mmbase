<form-schema id="step_webblocks">
  <title xml:lang="nl">Webblokken</title>
  <title xml:lang="en">Web blocks</title>

  <lists extends="data/webblocks/webblocktypes.xml"/>

  <field name="name" ftype="data"/> 

  <list destination="webblocks" role="blockposrel" 
        minoccurs="0" maxoccurs="*" ordertype="number" orderby="field[@name='x']">
    <item>
      <title>Homepage elementen invoeren</title>
      <field fdatapath="relation/field[@name='x']" ftype="int">
        <prompt>X-positie van dit homepage-element</prompt>
        <description>X-positie van dit homepage-element (1=links, 2=midden, 3=rechts)</description>
      </field>
      <field fdatapath="relation/field[@name='y']" ftype="int">
        <prompt>Y-positie van dit homepage-element</prompt>
        <description>Y-positie van dit homepage-element (hoe hoger het nummer hoe verder naar onder)</description>
      </field>
      <field name="name" dttype="string" dtminlength="2">
        <prompt>Naam</prompt>
        <description>Naam zoals die in het menu moet verschijnen</description>
      </field>
      <field name="description" ftype="text" rows="4" dttype="string" dtminlength="2">
        <prompt>Omschrijving</prompt>
        <description>Naam zoals die in het menu moet verschijnen</description>
      </field>
      <field name="display" ftype="int">
        <prompt>Weergave</prompt>
        <description>Weegave. Kan verschillend zijn per webblock</description>
      </field>
      <field name="type" ftype="enum">
        <prompt>Type</prompt>
        <optionlist select="webblocktypes"/>
        <description>Naam zoals die in het menu moet verschijnen</description>
      </field>
      <field name="name" />
      <field name="description" />
    </item>

    <command name="insert" />
    <action type="create">
      <relation role="blockposrel">
        <object type="blockposrel">
        </object>
        <field name="pos">{sum(//relation[@role='posrel' and @lastitem='true']/field[@name='pos'])+{$pos}}</field>
      </relation>
    </action>
  </list>
</form-schema>
