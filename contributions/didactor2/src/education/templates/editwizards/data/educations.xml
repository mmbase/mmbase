<?xml version="1.0"?>
<!DOCTYPE wizard-schema PUBLIC "-//MMBase/DTD editwizard 1.0//EN" "http://www.mmbase.org/dtd/wizard-schema_1_0.dtd">
<wizard-schema id="empty">
    <title>Opleiding Editor</title>

    <action type="create">
        <object type="educations">
        </object>
    </action>

    <action type="load">
        <relation destination="providers" role="related" />
        <relation destination="classes" role="related" />
        <relation destination="news" role="related" />
        <relation destination="learnblocks" role="posrel" />
        <relation destination="urlcategories" role="related" />
        <relation destination="people" role="rolerel">
          <object type="people">
            <relation destination="roles" role="related">
              <object type="roles"/>
            </relation>
          </object>
        </relation>
        <relation destination="paragraphs" role="posrel">
           <object>
              <relation destination="attachments" role="posrel" />
              <relation destination="images" role="pos2rel" />
           </object>
        </relation>
    </action>

    <action type="delete" />

    <lists>
       <optionlist include="paragraphs/images_position.xml" />
       <optionlist include="paragraphs/boolean.xml" />
    </lists>

    <steps>
        <step form-schema="step1" />
<!--        <step form-schema="step2" /> --> <!-- SEE BELOW -->
        <step form-schema="step3" />
    </steps>

    <form-schema id="step1">
        <title>Opleiding invoeren</title>
        <field name="name" dtminlength="1">
            <prompt>Opleiding naam</prompt>
        </field>

        <field name="intro" ftype="html" dtminlength="0">
            <prompt>Tekst</prompt>
        </field>

        <list destination="providers" role="related" extends="list/providers.xml" />
        <list destination="news" extends="list/news.xml" />
        <list destination="learnblocks" role="posrel" extends="list/learnblocks.xml" />
        <list destination="classes" role="related" extends="list/classes.xml" />
        <list destination="people" role="rolerel" extends="list/people-education.xml" />
        <list destination="urlcategories" role="related" extends="list/urlcategories.xml" />

    </form-schema>

<!--

    THIS HAS BEEN COMMENTED OUT BECAUSE IT BREAKS THE BUILD!
    PLEASE CHECK THAT YOUR STUFF DOESN'T BREAK THE 
    CVS HEAD, OR PUT THIS KIND OF THING IN A BRANCH.

    Note that we currently do a release from CVS HEAD every friday!

    If your updates need database changes, or any other manual
    actions to make them work on an existing instance, please add
    some documentation to "migratie.txt" (in the root directory)

    Joost Diepenmaat - joost@zeekat.nl
-->
<!--
    <form-schema id="step2">
        <title>Alineas invoeren</title>
        <field name="name" ftype="data"/>
        <field name="showtitle" ftype="enum">
           <prompt xml:lang="nl">Titel laten zien</prompt>
           <prompt xml:lang="en">Show title</prompt>
           <optionlist select="boolean"></optionlist>
        </field>
        <list extends="paragraphs/add_paragraphs_posrel.xml"/>
    </form-schema>
-->

    <form-schema id="step3">
        <title>Competenties invoeren</title>
        <field name="name" ftype="data"/>
        <list extends="list/needcompetencies.xml"/>
        <list extends="list/developcompetencies.xml"/>
    </form-schema>


</wizard-schema>
