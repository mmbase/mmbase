<?xml version="1.0"?>
<!DOCTYPE wizard-schema PUBLIC "-//MMBase/DTD editwizard 1.0//EN" "http://www.mmbase.org/dtd/wizard-schema_1_0.dtd">
<wizard-schema id="empty">
    <title>Pagina Editor</title>

    <action type="create">
        <object type="pages">
        </object>
    </action>

    <action type="load">
        <relation destination="mmevents" role="related" />
        <relation destination="images" role="sizerel" />
        <relation destination="audiotapes" role="related" />
        <relation destination="videotapes" role="related" />
        <relation destination="attachments" role="related" />
       <relation destination="urls" role="related" />
        <relation destination="metadata" role="related">
          <object type="metadata">
           <relation destination="metalangstring" role="posrel">
              <object type="metalangstring">
                <field name="number"/>
                <field name="language"/>
                <field name="value"/>
              </object>
            </relation>
           <relation destination="metadate" role="posrel">
              <object type="metadate">
                <field name="number"/>
                <field name="value"/>
              </object>
            </relation>
           <relation destination="metavocabulary" role="posrel">
              <object type="metavocabulary">
                <field name="number"/>
                <field name="value"/>
              </object>
            </relation>
            <relation destination="metadefinition" role="related">
              <object type="metadefinition">
                <relation destination="metavocabulary" role="related"/>
              </object>
            </relation>
            </object>
        </relation>
    </action>

    <action type="delete" />

<lists>
      <optionlist name="layout">
        <option id="0">Tekst boven</option>
        <option id="1">Tekst onder</option>
        <option id="2">Tekst links</option>
        <option id="3">Tekst rechts</option>
      </optionlist>

      <optionlist name="imagelayout">
        <option id="0">Hozontaal</option>
        <option id="1">Verticaal</option>
      </optionlist>
    </lists>



    <steps>
        <step form-schema="page" />
        <step form-schema="images" />
        <step form-schema="attachments" />
        <step form-schema="audiotapes" />
        <step form-schema="videotapes" />
        <step form-schema="urls" />
        <step form-schema="metadata" />
   </steps>

        <form-schema id="page">
        <title>Pagina invoeren</title>
        <field name="name" >
            <prompt>Naam</prompt>
        </field>
        <field name="text" ftype="html">
            <prompt>Tekst</prompt>
        </field>
        <field name="layout" ftype="enum">
            <prompt>Layout</prompt>
            <optionlist select="layout" />
        </field>
         <field name="imagelayout" ftype="enum">
            <prompt>Layout afbeeldingen</prompt>
            <optionlist select="imagelayout" />
        </field>
        

        <list role="related" extends="list/online.xml" />
        
    </form-schema>
    <form-schema id="metadata">
        <title>Metadata</title>
        <list extends="list/metadatalangstring.xml"/>
        <list extends="list/metadatadate.xml"/>
        <list extends="list/metadatavocabulary.xml"/>
    </form-schema>

    <form-schema id="images">
        <title>Afbeeldingen</title>
       <list role="sizerel" extends="list/sizedimages.xml" />

 
        <!-- we need a new list because there can be only one search command per list -->
        <list minoccurs="0" maxoccurs="*" role="sizerel">
            <title>Zoeken op tekenreeks</title>
            <item displaytype="none"></item>
 
            <action type="create">
                <relation role="sizerel" destinationtype="images"/>
            </action>


             <command name="search" nodepath="metalangstring,metadata,images" fields="images.title,metalangstring.value" age="7" orderby="images.number" directions="down" >
                <prompt>Zoeken op metadata</prompt>
                <search-filter>
                    <name>Metadata tekenreeks bevat</name>
                    <search-fields>metalangstring.value</search-fields>
                </search-filter>
           </command>           
        </list>

        <!-- we need a new list because there can be only one search command per list -->
        <list minoccurs="0" maxoccurs="*" role="sizerel">
            <title>Zoeken op vocabulair</title>
            <item displaytype="none"></item>
 
            <action type="create">
                <relation role="sizerel" destinationtype="images"/>
            </action>


             <command name="search" nodepath="metavocabulary,metadata,images" fields="images.title,metavocabulary.value" age="7" orderby="images.number" directions="down" >
                <prompt>Zoeken op metadata</prompt>
                <search-filter>
                    <name>Metadata vocabulair bevat</name>
                    <search-fields>metavocabulary.value</search-fields>
                </search-filter>
           </command>
           
        </list>

        <!-- we need a new list because there can be only one search command per list -->
        <list minoccurs="0" maxoccurs="*" ordertype="number" role="sizerel">
            <title>Zoeken op datum (YYYY-MM-DD HH:MM:SS)</title>
            <item displaytype="none"></item>
 
            <action type="create">
                <relation role="posrel" destinationtype="images"/>
            </action>


             <command name="search" nodepath="metadate,metadata,images" fields="images.title,metadate.value" age="7" orderby="images.number" directions="down" >
                <prompt>Zoeken naar leerobjecten op metadata</prompt>
                <search-filter>
                    <name>Metadata datum bevat</name>
                    <search-fields>FROM_UNIXTIME(metadate.value)</search-fields>
                </search-filter>
           </command>
           
        </list>

       
    </form-schema>

 
    <form-schema id="attachments" include="schemas/attachments.xml"/>
    <form-schema id="audiotapes" include="schemas/audiotapes.xml"/>
   <form-schema id="videotapes" include="schemas/videotapes.xml"/>
   <form-schema id="urls" include="schemas/urls.xml"/>
  

</wizard-schema>

