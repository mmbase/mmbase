<?xml version="1.0"?>
<!DOCTYPE wizard-schema PUBLIC "-//MMBase/DTD editwizard 1.0//EN" "http://www.mmbase.org/dtd/wizard-schema_1_0.dtd">
<wizard-schema id="empty">
    <title>Klas Editor</title>

    <action type="create">
      <object type="classes">
        <relation role="related">
          <object type="workspaces">
            <field name="name">Werkruimte van de klas</field>
          </object>
        </relation>
        <relation role="related">
          <object type="agendas">
            <field name="name">Klas Agenda</field>
          </object>
        </relation>
      </object>
    </action>
    
    <action type="load">
        <relation destination="people" role="classrel">
            <object type="people">
                <field name="firstname" />
                <field name="lastname" />
                <relation destinationtype="roles" role="related">
                  <object type="roles"/>
                </relation>
            </object>
            <field name="snumber" />
        </relation>
        
        <relation destination="news" role="related">
            <object type="news">
                <field name="title" />
            </object>
        </relation>
        <relation destination="mmevents" role="related" />
        <relation destination="workgroups" role="related" />
        <relation destination="workspaces" role="related" />
    </action>

    <action type="delete" />
    
    <steps>
        <step form-schema="step1" />
    </steps>

    <form-schema id="step1">
        <title>Klas Invoeren</title>
        <field name="name" dtminlength="1">
            <prompt>Klas naam</prompt>
        </field>
        <list destination="mmevents" role="related" minoccurs="1" maxoccurs="*" ordertype="number" orderby="field[@name='start']">
            <title>Looptijd van de klas</title>
            <item>
                <field name="start" ftype="datetime" dttype="datetime">
                    <prompt>Begin van de klas</prompt>
                </field>
                <field name="stop" ftype="datetime" dttype="datetime">
                    <prompt>Eind van de klas</prompt>
                </field>
            </item>
        
            <action type="create">
                <relation destinationtype="mmevents" role="related">
                </relation>
            </action>
            <command name="startwizard" inline="true" wizardname="mmevent-class" objectnumber="new" />
        </list>

        <list destination="news" extends="config/news/news-list.xml" />
        <list destination="people" extends="config/people/people-list.xml" />
        <list destination="workgroups" extends="config/workgroup/workgroups-list.xml" />
    </form-schema>
</wizard-schema>
