
Migratie issues

2004-12-01

De portfolio component is verder uitgebreid en af gemaakt. Gebruikers hebben nu
de mogelijkheid om een beschrijving van zichzelf te geven. Hiervoor moet een
desription veld aan de people tabel worden toegevoegd. Verder worden er nu
standaard per gebruiker 3 typen portfolio's aangemaakt.

- Stop de applicatie en draai de volgende SQL:

    alter table mmb_people add column description blob;

- Start de applicatie met de nieuwe war file zodat de Portfolio applicatie
  gedeployed wordt.
- Herstart de applicatie zodat de wijzigingen van de Portfolio applicatie actief
  worden.
- Vraag de volgende jsp op (meerder keren draaien geeft geen problemen):

    migratie-2004-12-01.jsp


2004-11-26

  bugfix: het was mogelijk om meerdere people objecten aan te maken met dezelfde
  username. op dat moment kan je niet meer inloggen met die username. dit is nu
  opgelost.

  Cleanup code:
  
  de volgende code verwijderd de nieuwste "dubbele" usernames als er meer dan 1 is.
  bij deze accounts moeten dan nieuwe usernames aangemaakt worden:

    update mmb_people join mmb_people as mmb_people2 on mmb_people2.username =
    mmb_people.username set mmb_people.username="" where mmb_people.username != "" 
    and mmb_people2.number < mmb_people.number;

  Dit is NIET op te lossen dmv van de editors: de people builder verbiedt het
  aanpassen van eenmaal aangemaakte usernames.


2004-11-26

in de web.xml moet voor sites die de PDF functionaliteit gebruiken de parameter
internalUrl gezet worden:

   <!-- 
        please set this to the interal url of the web application
        if that is different from the "outside" url.

        it needs to be the full url including the application path
        i.e.

        if the application startpage is http://localhost:8080/didactor/index.jsp

        this url should be http://localhost:8080/didactor

        this url is used by the application to do HTTP requests
        to itself.
    -->
    <context-param>
        <param-name>internalUrl</param-name>
        <param-value>http://localhost:8080/didactor</param-value>
    </context-param>

Op dit moment hoeft dat alleen voor baronie college.


2004-11-11

Inlogtijden kloppen niet. De berekening is oplost, maar de tijden moeten gereset worden:
stop de applicatie en draai de volgende SQL:

    update mmb_classrel set onlinetime=0;


2004-11-03

De directory education/files in de root van de web applicatie is nu bestemd voor uploads. 
Deze moet dus niet geleegd worden bij deployment van een nieuwe war en moet schrijfbaar 
zijn voor de web applicatie.

 ** 
 
    2004-11-10 Dit is nu aanpasbaar via de web.xml:
    
    <param-name>filemanagementBaseUrl</param-name>
    
    geeft de url van de upload directory (zodat de bestanden weer te downloaden zijn)

    <param-name>filemanagementBaseDirectory</param-name>
    
    geeft het directory pad waar de bestanden naartoe worden ge-upload.
    deze moet schrijfbaar zijn voor de web applicatie en niet worden geleegd tijdens
    updates.


    Voor developers: deze waardes worden overgenomen uit de configure.properties
    filemanagement.data.directory en filemanagement.data.url
    als je een eigen propertyfile hebt moet je ant altijd aanroepen met
    ant -propertyfile propertyfilenaam - de web.xml wordt altijd opniew
    aangemaakt.

    voorbeeld van configure.properies setting:

    filemanagement.data.directory=/home/joost/lib/tomcat/webapps/didactor/education/files
    filemanagement.data.url=/education/files
    
 ** 

Er is een maximum upload van 50 Mb in de upload pagina. Waarschijnlijk moet ook de
configuratie van de webserver aangepast worden om dat soort grote uploads toe te staan.



Bovenstaande is de verantwoordelijkheid van de hosting provider.

File-uploads zijn bereikbaar voor gebruikers met toegang tot de content-management en
de nieuwe rol "filemanager". Deze rol moet dus aangemaakt worden.



2004-11-01

Pagina model is veranderd

alter table mmb_pages add column layout INT(11);
alter table mmb_pages add column imagelayout INT(11);

Daarna kan je /migrate-2002-11-03.jsp aanroepen om bestaande pagina's te migreren


2004-10-26

Kalender objectmodel is veranderd.


2004-10-13

* Er is een description veld toegevoegd aan metadefinition. Met het volgende commando wordt het toegevoegd aan bestaande mysql databases.

  ALTER TABLE mmb_metadefinition ADD description blob NOT NULL AFTER name;


* KEY op username in people & contacts tabellen is vervallen. de volgende SQL statements lossen dit op voor bestaande mysql databases.

  ALTER TABLE mmb_people DROP INDEX username;
  ALTER TABLE mmb_contacts DROP INDEX username;

2004-10-??

 chatchannels mogen geen spaties meer in veld 'name' hebben, (nieuwe worden automatisch aangemaakt) dit is voor bestaande chatchannels op te lossen via de mmeditors of direct in de database.

