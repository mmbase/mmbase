<?xml version="1.0" encoding="UTF-8"?>
<!--
	* MMBase Remote Publishing
	*
	* The contents of this file are subject to the Mozilla Public License
	* Version 1.0 (the "License"); you may not use this file except in
	* compliance with the License. You may obtain a copy of the License at
	* http://www.mozilla.org/MPL/
	*
	* Software distributed under the License is distributed on an "AS IS"
	* basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
	* License for the specific language governing rights and limitations
	* under the License.
-->
<builder xmlns="http://www.mmbase.org/xmlns/builder"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.mmbase.org/xmlns/builder 
                        http://www.mmbase.org/xmlns/builder.xsd"
	name="publishqueue" maintainer="mmbase.org" version="1" extends="object">

	<status>active</status>
	<class>org.mmbase.remotepublishing.builders.PublishingQueueBuilder</class>
	<searchage>14</searchage>

	<names>
		<singular xml:lang="us">publishqueue</singular>
		<singular xml:lang="en">publishqueue</singular>
		<singular xml:lang="nl">publishqueue</singular>
		<plural xml:lang="us">publishqueues</plural>
		<plural xml:lang="en">publishqueues</plural>
		<plural xml:lang="nl">publishqueues</plural>
	</names>

	<descriptions>
		<description xml:lang="us">PublishQueue</description>
		<description xml:lang="en">PublishQueue</description>
		<description xml:lang="nl">PublishQueue</description>
	</descriptions>

	<properties>
		<property name="remotecloud">live.server</property>
		<property name="interval">60</property>
	</properties>

	<fieldlist>
		<field>
			<gui>
				<guiname xml:lang="us">TimeStamp</guiname>
				<guiname xml:lang="en">TimeStamp</guiname>
				<guiname xml:lang="nl">TijdStempel</guiname>
			</gui>
			<editor>
				<positions>
					<input>1</input>
					<list>1</list>
					<search>1</search>
				</positions>
			</editor>
			<datatype base="lastmodified" xmlns="http://www.mmbase.org/xmlns/datatypes" />
			<db>
				<name>timestamp</name>
				<type key="false" notnull="false" state="system">DATETIME</type>
			</db>
		</field>
		<field>
			<gui>
				<guiname xml:lang="us">nodenumber</guiname>
				<guiname xml:lang="en">nodenumber</guiname>
				<guiname xml:lang="nl">nodenumber</guiname>
			</gui>
			<editor>
				<positions>
					<input>2</input>
					<list>2</list>
					<search>2</search>
				</positions>
			</editor>
			<datatype base="integer" xmlns="http://www.mmbase.org/xmlns/datatypes" />
			<db>
				<name>sourcenumber</name>
				<type state="persistent" notnull="true">INTEGER</type>
			</db>
		</field>
		<field>
			<gui>
				<guiname xml:lang="us">Action</guiname>
				<guiname xml:lang="en">Action</guiname>
				<guiname xml:lang="nl">Action</guiname>
			</gui>
			<editor>
				<positions>
					<input>3</input>
					<list>3</list>
					<search>3</search>
				</positions>
			</editor>
			<datatype base="line" xmlns="http://www.mmbase.org/xmlns/datatypes" />
			<db>
				<!-- update , delete , publish -->
				<name>action</name>
				<type state="persistent" size="32" notnull="true">STRING</type>
			</db>
		</field>
		<field>
			<gui>
				<guiname xml:lang="us">DestinationCloud</guiname>
				<guiname xml:lang="en">DestinationCloud</guiname>
				<guiname xml:lang="nl">DestinationCloud</guiname>
			</gui>
			<editor>
				<positions>
					<input>4</input>
					<list>4</list>
					<search>4</search>
				</positions>
			</editor>
			<datatype base="integer" xmlns="http://www.mmbase.org/xmlns/datatypes" />
			<db>
				<name>destinationcloud</name>
				<type state="persistent" notnull="true">INTEGER</type>
			</db>
		</field>
		<field>
			<gui>
				<guiname xml:lang="us">status</guiname>
				<guiname xml:lang="en">status</guiname>
				<guiname xml:lang="nl">status</guiname>
			</gui>
			<editor>
				<positions>
					<input>5</input>
					<list>5</list>
					<search>5</search>
				</positions>
			</editor>
			<datatype base="line" xmlns="http://www.mmbase.org/xmlns/datatypes">
				<default value="init"/>
			</datatype>
			<db>
				<!-- update , delete , publish -->
				<name>status</name>
				<type state="persistent" size="32" notnull="true">STRING</type>
			</db>
		</field>
		<field>
			<descriptions>
				<description xml:lang="nl"></description>
				<description xml:lang="en"></description>
			</descriptions>
			<gui>
				<guiname xml:lang="nl">Publicatie datum</guiname>
				<guiname xml:lang="en">Publishdate</guiname>
			</gui>
			<editor>
				<positions>
					<input>6</input>
					<list>-1</list>
					<search>-1</search>
				</positions>
			</editor>
			<datatype base="datetime" xmlns="http://www.mmbase.org/xmlns/datatypes">
				<default value="now" />
			</datatype>
			<db>
				<name>publishdate</name>
				<type key="false" notnull="false" state="persistent">DATETIME</type>
			</db>
		</field>
		
		<field>
			<gui>
				<guiname xml:lang="us">relatednodes</guiname>
				<guiname xml:lang="en">relatednodes</guiname>
				<guiname xml:lang="nl">relatednodes</guiname>
			</gui>
			<editor>
				<positions>
					<input>5</input>
					<list>5</list>
					<search>5</search>
				</positions>
			</editor>
			<datatype base="field" xmlns="http://www.mmbase.org/xmlns/datatypes"/>
			<db>
				<name>relatednodes</name>
				<type state="persistent" size="4096" notnull="true">STRING</type>
			</db>
		</field>
	</fieldlist>
	
  <indexlist>
    <index name="publishqueue">
      <indexfield name="status" />
      <indexfield name="publishdate" />
    </index>
  </indexlist>
</builder>
