<?xml version="1.0" encoding="utf-8"?>
<!-- 
  If you use an application server which supports web-app version 2.4 (e.g. Tomcat 5.x), then you can also use a web.xml like this.  

  One of the advantages is that you can use EL.

  $Id: web-2.4.xml,v 1.3 2005-04-20 20:24:29 michiel Exp $
-->
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
         version="2.4">
  
  <display-name>MMBase distro</display-name>
  <description>
    MMBase is an open-source content managment system. See http://www.mmbase.org/
  </description>

  
  <!-- uncomment this and fill in the right value if you want to relocate your config directory
  <context-param>
    <param-name>mmbase.config</param-name>
    <param-value>WEB-INF/config</param-value>
  </context-param>
  -->  

  <!-- 
    MMBase Taglib settings
    -->
  <!-- 
  Whether tags should try to evaluate the body without buffering if that is possible. This feature
  of taglibs is not supported by all applications servers (orion, tomcat < 4.1.19?), in which case
  setting this to true will cause rather strange results.
  If your application server does support this well (resin 3, tomcat 5), you can set this to true,
  and improve performance.
  -->
  <context-param>
    <param-name>mmbase.taglib.eval_body_include</param-name>
    <param-value>true</param-value>
  </context-param>

  <!-- 
    Whether the mm:url tag (and other URL producing tags) should produce relative URL's (relative to
    the page on which the mm:url is called).  You might try to set this to 'true' if you desire only
    relative urls in your site. This is an expirimental option, which is known not to work in
    certain situations (like redirects).
  -->
  <context-param>
    <param-name>mmbase.taglib.url.makerelative</param-name>
    <param-value>false</param-value>
  </context-param>

  <!-- 
    The MMBase taglib stores its variable compatible with EL. If you don't want that (e.g. because
    it was not like this in MMBase 1.7) then you can set this parameter to 'true'
  -->
  <context-param>
    <param-name>mmbase.taglib.isELIgnored</param-name>
    <param-value>false</param-value>
  </context-param>


  <!-- 
    Filter for jumpers
    Uncomment this code if you want to activate the jumpers filter.
    You need to install the jumpers builder first
  -->
  <!--
  <filter>
    <filter-name>Jumpers Filter</filter-name>
    <display-name>Jumpers Filter</display-name>
    <description>Filter used for jumpers</description>
    <filter-class>org.mmbase.servlet.JumpersFilter</filter-class>
  </filter>

  <filter-mapping>
    <filter-name>Jumpers Filter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
-->

  <!-- The base MMBase servlet informs about the current MMBase version -->
  <servlet>
    <servlet-name>version</servlet-name>
    <servlet-class>org.mmbase.servlet.MMBaseServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <!-- The MMBase image serving servlet. -->
  <servlet>
    <servlet-name>images</servlet-name>
    <servlet-class>org.mmbase.servlet.ImageServlet</servlet-class>
    <init-param>
      <!-- Expire time of original images. Cached images never expire. -->
      <param-name>expire</param-name>
      <!-- 10 minutes (default is one hour)-->
      <param-value>600</param-value>
    </init-param>
    <init-param>
      <!-- Whether to accepts image conversion on the URL -->
      <param-name>convert</param-name>
      <param-value>false</param-value>
    </init-param>
    <init-param>
      <!-- Field of image node to use for 'last modified' -->
      <param-name>lastmodifiedfield</param-name>
      <param-value></param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
  </servlet>

  <!-- The MMBase attachment serving servlet. -->
  <servlet>
    <servlet-name>attachments</servlet-name>
    <servlet-class>org.mmbase.servlet.AttachmentServlet</servlet-class>
    <init-param>
      <!-- Expire time of original images. Cached images never expire. -->
      <param-name>expire</param-name>
      <!-- 10 minutes (default is one hour)-->
      <param-value>600</param-value>
    </init-param>
    <init-param>
      <!-- Field of attachment node to use for 'last modified' -->
      <param-name>lastmodifiedfield</param-name>
      <param-value></param-value>
    </init-param>
    <load-on-startup>3</load-on-startup>
  </servlet>


  <!-- mapping for version-request -->
  <servlet-mapping>
    <servlet-name>version</servlet-name>
    <url-pattern>/version</url-pattern>
  </servlet-mapping>

  <!-- mapping for image-requests -->
  <servlet-mapping>
    <servlet-name>images</servlet-name>
    <url-pattern>/mmbase/images/*</url-pattern>
  </servlet-mapping>

  <!-- mapping for attachment-requests -->
  <servlet-mapping>
    <servlet-name>attachments</servlet-name>
    <url-pattern>/mmbase/attachments/*</url-pattern>
  </servlet-mapping>

  <welcome-file-list>
    <welcome-file>index.jspx</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.jsp</welcome-file>
    <welcome-file>index.html</welcome-file>
  </welcome-file-list>

</web-app>
