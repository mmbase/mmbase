<!DOCTYPE application PUBLIC "//MMBase - application//" "http://www.mmbase.org/dtd/application_1_0.dtd">
<application name="Media" maintainer="mediaproject.mmbase.org" version="1" auto-deploy="true">
  <neededbuilderlist>
    <builder maintainer="mediaproject.mmbase.org" version="1">mediafragments</builder>
    <builder maintainer="mediaproject.mmbase.org" version="1">audiofragments</builder>
    <builder maintainer="mediaproject.mmbase.org" version="1">videofragments</builder>

    <builder maintainer="mediaproject.mmbase.org" version="1">lookup</builder>
    <builder maintainer="mediaproject.mmbase.org" version="1">mediaproviders</builder>

    <builder maintainer="mediaproject.mmbase.org" version="1">mediasources</builder>
    <builder maintainer="mediaproject.mmbase.org" version="1">audiosources</builder>
    <builder maintainer="mediaproject.mmbase.org" version="1">videosources</builder>

    <builder maintainer="mediaproject.mmbase.org" version="1">insrel</builder>
    <builder maintainer="mediaproject.mmbase.org" version="1">posrel</builder>
    <builder maintainer="mediaproject.mmbase.org" version="1">pools</builder>
    <builder maintainer="mediaproject.mmbase.org" version="1">publishtimes</builder>
  </neededbuilderlist>

  <neededreldeflist>
    <reldef source="related" target="related" direction="bidirectional" guisourcename="Related" guitargetname="Related" builder="insrel" />
    <reldef source="posrel" target="posrel" direction="bidirectional" guisourcename="Posrel" guitargetname="Posrel" builder="posrel" />
  </neededreldeflist>

  <allowedrelationlist>
    <relation from="pools"           to="mediafragments"  type="related" />
    <relation from="mediafragments"  to="mediasources"    type="related" />
    <relation from="mediafragments"  to="mediafragments"  type="parent" />
    <relation from="mediafragments"  to="mediafragments"  type="posrel" />
    <relation from="mediafragments"  to="publishtimes"    type="related" />

    <relation from="mediasources"    to="mediaproviders"  type="related" />

    <!-- the following should not be needed (because of inheritance) -->
    <relation from="audiofragments"  to="audiosources" type="related" />
    <relation from="videofragments"  to="videosources" type="related" />

    <relation from="videofragments"  to="mediasources" type="related" />
    <relation from="videofragments"  to="mediafragments" type="related" />
  </allowedrelationlist>

  <datasourcelist>
		<datasource builder="pools"            path="Media/pools.xml" />
		<datasource builder="mediafragments"   path="Media/mediafragments.xml" />
		<datasource builder="mediasources"     path="Media/mediasources.xml" />
		<datasource builder="videofragments"   path="Media/videofragments.xml" />
		<datasource builder="audiosources"     path="Media/audiosources.xml" />
		<datasource builder="lookup"           path="Media/lookup.xml" />
		<datasource builder="mediaproviders"   path="Media/mediaproviders.xml" />
	</datasourcelist>

	<relationsourcelist>
		<relationsource builder="insrel" path="Media/insrel.xml" />
		<relationsource builder="posrel" path="Media/posrel.xml" />
  </relationsourcelist>
  
  <contextsourcelist>
    <contextsource path="Media/backup.xml" type="depth" goal="backup"/>
  </contextsourcelist>

  <description>
     Relations needed for the media-project + some examples 
  </description>

  <install-notice>
     The needed relations for the media functionality are created. And some examples are inserted.
  </install-notice>
</application>
