<!DOCTYPE application PUBLIC "//MMBase - application//" "http://www.mmbase.org/dtd/application_1_0.dtd">
<application name="Media" maintainer="mediaproject.mmbase.org" version="1" auto-deploy="true">
  <neededbuilderlist>
    <builder maintainer="mediaproject.mmbase.org" version="1">mediafragments</builder>
    <builder maintainer="mediaproject.mmbase.org" version="1">audiofragments</builder>
    <builder maintainer="mediaproject.mmbase.org" version="1">videofragments</builder>

    <builder maintainer="mediaproject.mmbase.org" version="1">mediaproviders</builder>
    <builder maintainer="mediaproject.mmbase.org" version="1">mediaurlcomposers</builder>

    <builder maintainer="mediaproject.mmbase.org" version="1">mediasources</builder>
    <builder maintainer="mediaproject.mmbase.org" version="1">audiosources</builder>
    <builder maintainer="mediaproject.mmbase.org" version="1">videosources</builder>

    <builder maintainer="mediaproject.mmbase.org" version="1">insrel</builder>
    <builder maintainer="mediaproject.mmbase.org" version="1">posrel</builder>

    <builder maintainer="mediaproject.mmbase.org" version="1">pools</builder>
    <builder maintainer="mediaproject.mmbase.org" version="1">publishtimes</builder>

    <!-- example -->
    <builder maintainer="mediaproject.mmbase.org" version="1">myurlcomposers</builder>
  </neededbuilderlist>

  <neededreldeflist>
    <reldef source="related" target="related" direction="bidirectional" guisourcename="Related" guitargetname="Related" builder="insrel" />
    <reldef source="parent"  target="parent"  direction="bidirectional" guisourcename="Parent"  guitargetname="Child" builder="insrel" />
    <reldef source="posrel"  target="posrel"  direction="bidirectional" guisourcename="Posrel"  guitargetname="Posrel" builder="posrel" />
  </neededreldeflist>

  <allowedrelationlist>
    <relation from="videofragments"  to="videofragments"  type="parent" />
    <relation from="audiofragments"  to="audiofragments"  type="parent" />

    <relation from="videofragments"  to="videofragments"  type="posrel" />
    <relation from="audiofragments"  to="audiofragments"  type="posrel" />

    <relation from="videofragments"  to="publishtimes"    type="related" />
    <relation from="audiofragments"  to="publishtimes"    type="related" />


    <relation from="pools"           to="pools"           type="parent"  />
 

    <relation from="audiofragments"  to="audiosources"    type="related" />
    <relation from="videofragments"  to="videosources"    type="related" />
   

    <relation from="audiosources"    to="mediaproviders"  type="related" />
    <relation from="videosources"    to="mediaproviders"  type="related" />

    <relation from="mediaproviders"  to="mediaurlcomposers"     type="posrel" />

    <relation from="pools"           to="videofragments"  type="related" />
    <relation from="pools"           to="audiofragments"  type="related" />


    <!-- needed to let relatenodes types="mediaframents" work -->
    <relation from="pools"           to="mediafragments"  type="related" />

    <!-- example -->
    <relation from="mediaproviders"  to="myurlcomposers"     type="posrel" />

  </allowedrelationlist>

  <datasourcelist>
		<datasource builder="pools"            path="Media/pools.xml" />

		<datasource builder="mediafragments"   path="Media/mediafragments.xml" />
		<datasource builder="audiofragments"   path="Media/audiofragments.xml" />
		<datasource builder="videofragments"   path="Media/videofragments.xml" />

		<datasource builder="mediasources"     path="Media/mediasources.xml" />
		<datasource builder="audiosources"     path="Media/audiosources.xml" />
		<datasource builder="videosources"     path="Media/videosources.xml" />

		<datasource builder="mediaproviders"     path="Media/mediaproviders.xml" />
		<datasource builder="mediaurlcomposers"  path="Media/mediaurlcomposers.xml" />

    <!-- example -->
		<datasource builder="myurlcomposers"     path="Media/myurlcomposers.xml" />
	</datasourcelist>

	<relationsourcelist>
		<relationsource builder="insrel" path="Media/insrel.xml" />
		<relationsource builder="posrel" path="Media/posrel.xml" />
  </relationsourcelist>
  
  <contextsourcelist>
    <contextsource path="Media/backup.xml" type="depth" goal="backup"/>
  </contextsourcelist>

  <description>
     Relations needed for the media-project + some examples 
  </description>

  <install-notice>
     The needed relations for the media functionality are created. And some examples are inserted.
  </install-notice>
</application>
