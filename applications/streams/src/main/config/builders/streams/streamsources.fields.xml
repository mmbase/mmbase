<fieldlist
    xmlns="http://www.mmbase.org/xmlns/builder"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.mmbase.org/xmlns/builder
                        http://www.mmbase.org/xmlns/builder.xsd"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    >

  <field name="state" state="system">
    <datatype xmlns="http://www.mmbase.org/xmlns/datatypes">
      <default value="SOURCE" />
      <enumeration enforce="onchange">
        <entry
            javaconstants="org.mmbase.applications.media.State"
            basename="org.mmbase.applications.media.builders.resources.states" />
      </enumeration>
    </datatype>
  </field>

  <field name="url">
    <datatype base="file" xmlns="http://www.mmbase.org/xmlns/datatypes">
      <unique value="true" />
      <required value="true">
        <description xml:lang="en">A file is required</description>
        <description xml:lang="nl">Een bestand is verplicht</description>
      </required>
      <commitprocessor>
        <class name="org.mmbase.datatypes.processors.BinaryCommitProcessor">
          <param name="setContentTypeIfNotRecognized">false</param>
        </class>
        <class name="org.mmbase.streams.CreateCachesProcessor">
          <param name="configFile">streams/createcaches.xml</param>
        </class>
      </commitprocessor>
      <deleteprocessor>
        <class name="org.mmbase.streams.DeleteCachesProcessor">
        </class>
      </deleteprocessor>
    </datatype>
  </field>

  <field name="mimetype" state="system">
    <datatype base="eline" xmlns="http://www.mmbase.org/xmlns/datatypes" />
  </field>

  <field name="objecttype" state="virtual">
    <datatype base="objecttype" xmlns="http://www.mmbase.org/xmlns/datatypes">
      <pattern value="audiostreamsources|videostreamsources|streamsources|imagesources" />
      <commitprocessor>
        <class name="org.mmbase.applications.media.FragmentTypeFixer" />
      </commitprocessor>
    </datatype>
  </field>

  <!--
  <field name="origin_trace" state="system">
    <datatype base="origin-trace" xmlns="http://www.mmbase.org/xmlns/datatypes" />
  </field>
  -->

  <xi:include href="mediaprovider.field.xml" />

</fieldlist>
