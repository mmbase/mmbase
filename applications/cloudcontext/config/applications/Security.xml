<?xml version="1.0"?>
<!DOCTYPE application PUBLIC "-//MMBase//DTD application config 1.1//EN" "http://www.mmbase.org/dtd/application_1_1.dtd">
<application name="Security" maintainer="mmbase://security.mmbase.org/" version="2" auto-deploy="true">

  <requirements>
    <requires name="SecurityBasics" maintainer="mmbase://security.mmbase.org/" version="2" />
  </requirements>

	<neededbuilderlist>
    <builder maintainer="mmbase://security.mmbase.org/" version="1">mmbasecontexts</builder>
  </neededbuilderlist>

  <neededreldeflist>
    <reldef source="related"  target="related"      direction="bidirectional" guisourcename="Related"  guitargetname="Related"      builder="insrel"/>
    <reldef source="contains" target="containedBy"  direction="bidirectional" guisourcename="contains" guitargetname="contained by" builder="insrel" />
    <reldef source="grants"   target="grantedBy"    direction="bidirectional" guisourcename="grants"   guitargetname="granted by"   builder="rightsrel" />
    <reldef source="rank"     target="rank"         direction="bidirectional" guisourcename="Rank"     guitargetname="User"         builder="insrel" />
    <reldef source="allowed"  target="allowed"      direction="bidirectional" guisourcename="Allowed to change to" guitargetname="Allowed to change from" builder="insrel" />
  </neededreldeflist>

  <allowedrelationlist>
    <relation from="mmbasecontexts" to="mmbasegroups"   type="grants" />
    <relation from="mmbasecontexts" to="mmbaseusers"    type="grants" />
    <relation from="mmbasecontexts" to="mmbasecontexts" type="allowed" />
  </allowedrelationlist>

  <datasourcelist>
    <datasource builder="mmbasecontexts" path="Security/mmbasecontexts.xml" />
  </datasourcelist>

  <relationsourcelist>
    <!-- relationsource builder="containsrel" path="Security/containsrel.xml" /-->
    <relationsource builder="rightsrel" path="Security/rightsrel.xml" />
    <relationsource builder="insrel" path="Security/insrel.xml" />
  </relationsourcelist>

  <contextsourcelist>
    <contextsource path="Security/backup.xml" type="depth" goal="backup"/>
  </contextsourcelist>

  <description>
    Security in MMBase, which has nested groups
  </description>

  <install-notice>
    Installation is finished.
  </install-notice>
</application>
