<?xml version="1.0"?>
<wizard-schema id="empty">
	<title>(advanced) example</title>

	<action type="create">
		<object type="news">
			<field name="title">Don't forget to add a title!</field>
		</object>
	</action>
	
	<action type="delete" />
	
	<action type="load">
		<relation destination="people" role="related" />
		<relation destination="images" role="related" />
		<relation destination="urls" role="related" />
	</action>
	
	<form-schema id="basics">
		<title>Basic News</title>
		<subtitle>foobar</subtitle>
		<field name="title" dtminlength="10" >
			<prompt>Title</prompt>
		</field>

		<field name="subtitle" >
			<prompt>Subtitle</prompt>
		</field>

		<field name="intro" ftype="text" rows="4" >
			<prompt>Intro</prompt>
		</field>
		
		<field name="body" ftype="html" rows="8" >
			<prompt>Body</prompt>
		</field>

		<list role="related" destination="people" minoccurs="0"  maxoccurs="3">
      <title>Authors (notice the search-filters)</title>       
			<command name="search" nodepath="people"
        fields="firstname,lastname" orderby="lastname" age="-1" filterrequired="true">
				<prompt>People</prompt>
				<search-filter>
					<name>firstname contains</name>
					<search-fields>firstname</search-fields>
          <default>Jan</default>
				</search-filter>
				<search-filter>
					<name>lastname contains</name>
				  <search-fields>lastname</search-fields>
				</search-filter>
				<search-filter>
					<name>number</name>
				  <search-fields>number</search-fields>
				</search-filter>
			</command>

      <item>
        <fieldset>
          <field ftype="data" name="firstname" />
          <field ftype="data" name="middle" />
          <field ftype="data" name="lastname" />
          <prompt>Name</prompt>
        </fieldset>
      </item>
			
			<action type="create">
				<relation destinationtype="people" role="related">
				</relation>
			</action>
		</list>

    <list extends="lib/addimages.xml">
			<action type="create">
				<relation destinationtype="images" role="related">					
				</relation>
			</action>
    </list>

	</form-schema>

	<form-schema id="url">
		<field name="title" ftype="data" />
    <title>Relate URL's (example of pop-up wizard)</title>
    <list fdatapath="relation[object/@type='urls']" minoccurs="0" maxoccurs="*" type="urls">
		<!-- list role="related" destination="urls" minoccurs="0"  maxoccurs="*"-->
      <title>Links</title>       
			<command name="search" nodepath="urls" fields="name,description,url" orderby="name" age="-1">
				<prompt>Url (demonstration searching in multipable fields, and of two types of startwizards)</prompt>
				<search-filter>
					<name>URL</name>
					<search-fields>url|name|description</search-fields>
				</search-filter>
			</command>
			
      <!-- a not-inline startwizard will pop-up a window to create the new object -->
      <command name="startwizard" inline="false" wizardname="tasks/myurls" objectnumber="new" />

      <!-- an inline startwizard will replace the current wizard to create the new object and come back when ready -->
      <command name="startwizard" inline="true" wizardname="samples/urls" objectnumber="new" />

      <!-- samples/urls: you'll not find a samples/urls.xml in this directory. Search in /mmapps/editwizard/data -->

      <item>
        <field name="url" />
        <field name="name" />
      </item>
			
      <command name="insert" />
			<action type="create">
				<relation destinationtype="urls" role="related">
          <object type="urls">
            <field name="url">http://</field>
          </object>
          </relation>
			</action>
		</list>

  </form-schema>
</wizard-schema>
