<?xml version="1.0"?>
<!DOCTYPE application PUBLIC "-//MMBase/DTD application config 1.1//EN" "http://www.mmbase.org/dtd/application_1_1.dtd">
<application name="sitemanagement" maintainer="finalist.com" version="1" auto-deploy="true">
   <requirements>
      <requires name="contentrepository" maintainer="finalist.com" version="1" type="application"/>
   </requirements>
   <neededbuilderlist>
      <builder maintainer="mmbase.org" version="1">insrel</builder>
      <!-- These are the application specific relation builders -->
      <builder maintainer="finalist.com" version="1">layoutrel</builder>
      <builder maintainer="finalist.com" version="1">navrel</builder>
      <builder maintainer="finalist.com" version="1">portletrel</builder>
      <builder maintainer="finalist.com" version="1">screenrel</builder>
      <!-- These are the application specific builders -->
      <builder maintainer="finalist.com" version="1">layout</builder>
      <builder maintainer="finalist.com" version="1">navchannel</builder>
      <builder maintainer="finalist.com" version="1">portlet</builder>
      <builder maintainer="finalist.com" version="1">portletparameter</builder>
      <builder maintainer="finalist.com" version="1">properties</builder>
      <builder maintainer="finalist.com" version="1">screen</builder>
      <builder maintainer="finalist.com" version="1">site</builder>
      <builder maintainer="finalist.com" version="1">view</builder>
    </neededbuilderlist>
    <neededreldeflist>
        <reldef source="defaultnavrel" target="defaultnavrel" direction="bidirectional" guisourcename="defaultnavrel" guitargetname="defaultnavrel" builder="insrel" />
        <reldef source="forwardrel" target="forwardrel" direction="bidirectional" guisourcename="forwardrel" guitargetname="forwardrel" builder="insrel" />
        <reldef source="layoutrel" target="layoutrel" direction="bidirectional" guisourcename="layoutrel" guitargetname="layoutrel" builder="layoutrel" />
        <reldef source="navrel" target="navrel" direction="bidirectional" guisourcename="navrel" guitargetname="navrel" builder="navrel" />
        <reldef source="parameterrel" target="parameterrel" direction="bidirectional" guisourcename="parameterrel" guitargetname="parameterrel" builder="insrel" />
        <reldef source="portletrel" target="portletrel" direction="bidirectional" guisourcename="portletrel" guitargetname="portletrel" builder="portletrel" />
        <reldef source="screenrel" target="screenrel" direction="bidirectional" guisourcename="screenrel" guitargetname="screenrel" builder="screenrel" />
   </neededreldeflist>
   <allowedrelationlist>
      <relation from="site" to="navchannel" type="defaultnavrel" />
      <relation from="site" to="navchannel" type="navrel" />
      <relation from="navchannel" to="popupinfo" type="related" />
      <relation from="navchannel" to="navchannel" type="forwardrel" />
      <relation from="navchannel" to="navchannel" type="navrel" />
      <relation from="navchannel" to="screen" type="screenrel" />
      <relation from="screen" to="layout" type="layoutrel" />
      <relation from="screen" to="portlet" type="portletrel" />
      <relation from="portlet" to="contentchannel" type="parameterrel" />
      <relation from="portlet" to="contentelement" type="parameterrel" />
      <relation from="portlet" to="navchannel" type="parameterrel" />
      <relation from="portlet" to="portletparameter" type="parameterrel" />
      <relation from="portlet" to="view" type="parameterrel" />
      <relation from="user" to="site" type="rolerel" />
      <relation from="user" to="navchannel" type="rolerel" />
   </allowedrelationlist>

   <datasourcelist>
   <!-- A testdata/back up skelet is generated. If the testdata is not available, it will still work. -->
      <datasource builder="popupinfo" path="sitemanagement/popupinfo.xml" />
      <datasource builder="portlet" path="sitemanagement/portlet.xml" />
      <datasource builder="portletparameter" path="sitemanagement/portletparameter.xml" />
      <datasource builder="view" path="sitemanagement/view.xml" />
      <datasource builder="navchannel" path="sitemanagement/navchannel.xml" />
      <datasource builder="screen" path="sitemanagement/screen.xml" />
      <datasource builder="layout" path="sitemanagement/layout.xml" />
      
      <datasource builder="editwizards" path="sitemanagement/editwizards.xml" />
      <datasource builder="site" path="sitemanagement/site.xml" />
   </datasourcelist>

   <relationsourcelist>
   <!-- A testdata/backup skelet is generated for relation data. If the testdata is not available, it will still work. -->
      <relationsource builder="insrel" path="sitemanagement/insrel.xml"/>
      <relationsource builder="navrel" path="sitemanagement/navrel.xml"/>
      <relationsource builder="portletrel" path="sitemanagement/portletrel.xml"/>
   </relationsourcelist>

   <contextsourcelist>
      <contextsource goal="backup" type="depth" path="sitemanagement/backup.xml"/>
   </contextsourcelist>

   <description><![CDATA[Installs the application. Included are all the builders.]]></description>
   <install-notice><![CDATA[You have installed the application.]]></install-notice>
</application>