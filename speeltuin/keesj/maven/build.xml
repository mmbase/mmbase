<?xml version="1.0"?>
<project name="MMBase" default="all" basedir=".">
  <property name="cvsuser" value="guest"/>
  <property name="cvspasswd" value="guest"/>
  <property name="cvsmethod" value="pserver"/>
  <property name="mmbaseroot" value="tmp/mmbase-core"/>
  <property name="cvsroot" value=":${cvsmethod}:${cvsuser}@cvs.mmbase.org:/var/cvs "/>
  <target name="init">
    <cvspass cvsroot="${cvsroot}" password="${cvspasswd}"/>
    <cvs cvsRoot="${cvsroot}" package="mmbase-core" dest="tmp"/>
  </target>
  <target name="all" depends="mmbase-core"/>
  <target name="mmbase-core" depends="init">
    <!-- create a structure that matches the maven structure -->
    <delete dir="mmbase-core/CVS"/>
    <copy todir="mmbase-core/src">
      <fileset dir="${mmbaseroot}/src" defaultexcludes="no">
        <exclude name="org/mmbase/module/builders/ConvertJAI.java"/>
        <exclude name="org/mmbase/module/JMSendMail.java"/>
        <exclude name="org/mmbase/module/database/support/MMOracle.java"/>
        <exclude name="org/mmbase/module/database/support/MMInformix42Node.java"/>
      </fileset>
    </copy>
    <copy todir="mmbase-core/sdocbook">
      <fileset dir="${mmbaseroot}/documentation" defaultexcludes="no">
        <exclude name="**/build.xml"/>
        <exclude name="frontenddevelopers/editwizard/**"/>
      </fileset>
    </copy>
    <copy todir="mmbase-core/tests">
      <fileset dir="${mmbaseroot}/tests/bridge"/>
      <fileset dir="${mmbaseroot}/tests/common"/>
      <fileset dir="${mmbaseroot}/tests/convertimage"/>
      <fileset dir="${mmbaseroot}/tests/dbsq"/>
      <fileset dir="${mmbaseroot}/tests/typerel"/>
    </copy>
    <copy todir="mmbase-core/tests/config">
      <fileset dir="${mmbaseroot}/tests/config"/>
    </copy>
    <copy todir="mmbase-core/xdocs/docbook/media" flatten="true">
      <fileset dir="${mmbaseroot}/documentation">
        <include name="**/*.jpg"/>
        <include name="**/*.png"/>
        <include name="**/*.eps"/>
        <include name="**/*.eps"/>
      </fileset>
    </copy>
  </target>
</project>
